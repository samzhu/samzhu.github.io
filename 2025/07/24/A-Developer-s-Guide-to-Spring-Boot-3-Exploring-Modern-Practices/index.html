<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.samzhu.dev","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.18.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="This guide will walk you through a project built with Java 21, Spring Boot 3, and Gradle. Our goal isnâ€™t just to write working code - we want to make sure the project is robust, fast, and easy to main">
<meta property="og:type" content="article">
<meta property="og:title" content="A Developer&#39;s Guide to Spring Boot 3 - Exploring Modern Practices">
<meta property="og:url" content="https://blog.samzhu.dev/2025/07/24/A-Developer-s-Guide-to-Spring-Boot-3-Exploring-Modern-Practices/index.html">
<meta property="og:site_name" content="Sam&#39;s programming note">
<meta property="og:description" content="This guide will walk you through a project built with Java 21, Spring Boot 3, and Gradle. Our goal isnâ€™t just to write working code - we want to make sure the project is robust, fast, and easy to main">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/software_architecture.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/tempo_query3.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/tempo_query1.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/tempo_query2.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/prometheus_query1.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/loki_query1.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/tempo_query4.jpg">
<meta property="article:published_time" content="2025-07-23T16:00:00.000Z">
<meta property="article:modified_time" content="2025-07-24T15:41:45.586Z">
<meta property="article:author" content="Sam Zhu">
<meta property="article:tag" content="SpringBoot">
<meta property="article:tag" content="Observability">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/software_architecture.jpg">
<meta name="twitter:creator" content="@samzhu0318">


<link rel="canonical" href="https://blog.samzhu.dev/2025/07/24/A-Developer-s-Guide-to-Spring-Boot-3-Exploring-Modern-Practices/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://blog.samzhu.dev/2025/07/24/A-Developer-s-Guide-to-Spring-Boot-3-Exploring-Modern-Practices/","path":"2025/07/24/A-Developer-s-Guide-to-Spring-Boot-3-Exploring-Modern-Practices/","title":"A Developer's Guide to Spring Boot 3 - Exploring Modern Practices"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>A Developer's Guide to Spring Boot 3 - Exploring Modern Practices | Sam's programming note</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CFLHEYEETG"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-CFLHEYEETG","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>







<meta name="google-adsense-account" content="ca-pub-5880479202699914">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5880479202699914"
     crossorigin="anonymous"></script>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Sam's programming note</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%9A%80-Quick-Start"><span class="nav-number">1.</span> <span class="nav-text">ğŸš€ Quick Start</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Start-the-Application"><span class="nav-number">1.1.</span> <span class="nav-text">Start the Application</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Verify-Everything-Works"><span class="nav-number">1.2.</span> <span class="nav-text">Verify Everything Works</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%93%9A-Suggested-Learning-Path-for-beginners"><span class="nav-number">1.3.</span> <span class="nav-text">ğŸ“š Suggested Learning Path (for beginners)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Software-Architecture"><span class="nav-number">2.</span> <span class="nav-text">Software Architecture</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%93%81-Project-Structure-Overview"><span class="nav-number">3.</span> <span class="nav-text">ğŸ“ Project Structure Overview</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%A7%A9-Core-Technologies-Key-Dependencies"><span class="nav-number">4.</span> <span class="nav-text">ğŸ§© Core Technologies &amp; Key Dependencies</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Languages-Frameworks"><span class="nav-number">4.1.</span> <span class="nav-text">Languages&#x2F;Frameworks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Build-Tools-Plugins"><span class="nav-number">4.2.</span> <span class="nav-text">Build Tools &amp; Plugins</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Dependencies"><span class="nav-number">4.3.</span> <span class="nav-text">Key Dependencies</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#API-Web-Layer"><span class="nav-number">4.3.1.</span> <span class="nav-text">API &amp; Web Layer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Data-Access-Cache-Layer"><span class="nav-number">4.3.2.</span> <span class="nav-text">Data Access &amp; Cache Layer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Observability-Layer"><span class="nav-number">4.3.3.</span> <span class="nav-text">Observability Layer</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E2%9A%99%EF%B8%8F-Environment-Configuration-Settings-Management"><span class="nav-number">5.</span> <span class="nav-text">âš™ï¸ Environment Configuration &amp; Settings Management</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuration-File-Loading-Priority"><span class="nav-number">5.1.</span> <span class="nav-text">Configuration File Loading Priority</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuration-File-Architecture"><span class="nav-number">5.2.</span> <span class="nav-text">Configuration File Architecture</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Base-Configuration-Files-src-main-resources"><span class="nav-number">5.2.1.</span> <span class="nav-text">Base Configuration Files (src&#x2F;main&#x2F;resources&#x2F;)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Environment-Specific-Configuration-config"><span class="nav-number">5.2.2.</span> <span class="nav-text">Environment-Specific Configuration (config&#x2F;)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Multi-Environment-Startup-Examples"><span class="nav-number">5.3.</span> <span class="nav-text">Multi-Environment Startup Examples</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Local-Development"><span class="nav-number">5.3.1.</span> <span class="nav-text">Local Development</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Test-Environments"><span class="nav-number">5.3.2.</span> <span class="nav-text">Test Environments</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%8E%AF-Configuration-Best-Practices"><span class="nav-number">5.4.</span> <span class="nav-text">ğŸ¯ Configuration Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Dynamic-Version-Injection"><span class="nav-number">5.4.1.</span> <span class="nav-text">Dynamic Version Injection</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuration-Security-Best-Practices"><span class="nav-number">5.5.</span> <span class="nav-text">Configuration Security Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%94%90-Handling-Sensitive-Information"><span class="nav-number">5.5.1.</span> <span class="nav-text">ğŸ” Handling Sensitive Information</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%93%8A-Environment-Specific-Tuning"><span class="nav-number">5.5.2.</span> <span class="nav-text">ğŸ“Š Environment-Specific Tuning</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VSCode-Development-Setup"><span class="nav-number">5.6.</span> <span class="nav-text">VSCode Development Setup</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Create-via-VSCode-Command-Palette-Recommended"><span class="nav-number">5.6.1.</span> <span class="nav-text">Create via VSCode Command Palette (Recommended)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%9B%A0%EF%B8%8F-Development-Setup"><span class="nav-number">6.</span> <span class="nav-text">ğŸ› ï¸ Development &amp; Setup</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Development-Guide"><span class="nav-number">6.1.</span> <span class="nav-text">Development Guide</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IDE-Integration"><span class="nav-number">6.2.</span> <span class="nav-text">IDE Integration</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%A4%9D-API-First-Development-Workflow"><span class="nav-number">7.</span> <span class="nav-text">ğŸ¤ API First Development Workflow</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#How-It-Works"><span class="nav-number">7.1.</span> <span class="nav-text">How It Works</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Settings-in-build-gradle"><span class="nav-number">7.2.</span> <span class="nav-text">Key Settings in build.gradle</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Benefits-of-API-First"><span class="nav-number">7.3.</span> <span class="nav-text">Benefits of API First</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%97%BA%EF%B8%8F-Object-Mapping-MapStruct"><span class="nav-number">8.</span> <span class="nav-text">ğŸ—ºï¸ Object Mapping (MapStruct)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Purpose"><span class="nav-number">8.1.</span> <span class="nav-text">Purpose</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Benefits"><span class="nav-number">8.2.</span> <span class="nav-text">Benefits</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Settings-in-build-gradle-1"><span class="nav-number">8.3.</span> <span class="nav-text">Key Settings in build.gradle</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mapper-Interface-Definition-BookMapper-java"><span class="nav-number">8.4.</span> <span class="nav-text">Mapper Interface Definition (BookMapper.java)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Usage-Example"><span class="nav-number">8.5.</span> <span class="nav-text">Usage Example</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%93%9C-Database-Version-Control-Liquibase"><span class="nav-number">9.</span> <span class="nav-text">ğŸ“œ Database Version Control (Liquibase)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Why-Not-Use-ddl-auto"><span class="nav-number">9.1.</span> <span class="nav-text">Why Not Use ddl-auto?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-Liquibase-Works"><span class="nav-number">9.2.</span> <span class="nav-text">How Liquibase Works</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Project-Implementation"><span class="nav-number">9.3.</span> <span class="nav-text">Project Implementation</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Master-Changelog"><span class="nav-number">9.3.1.</span> <span class="nav-text">Master Changelog</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Changeset-Files"><span class="nav-number">9.3.2.</span> <span class="nav-text">Changeset Files</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Development-Workflow-How-to-Add-a-Database-Change"><span class="nav-number">9.3.3.</span> <span class="nav-text">Development Workflow: How to Add a Database Change</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E2%9A%A1%EF%B8%8F-Caching-Mechanism-Spring-Cache-Redis"><span class="nav-number">10.</span> <span class="nav-text">âš¡ï¸ Caching Mechanism (Spring Cache + Redis)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Cache-Consistent-Cache-Abstraction"><span class="nav-number">10.1.</span> <span class="nav-text">Spring Cache: Consistent Cache Abstraction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis-High-Performance-Cache-Implementation"><span class="nav-number">10.2.</span> <span class="nav-text">Redis: High-Performance Cache Implementation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cache-Implementation"><span class="nav-number">10.3.</span> <span class="nav-text">Cache Implementation</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Strategy-Only-Cache-High-Frequency-Single-Item-Reads"><span class="nav-number">10.3.1.</span> <span class="nav-text">Strategy: Only Cache High-Frequency Single Item Reads</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Enable-Caching"><span class="nav-number">10.3.2.</span> <span class="nav-text">1. Enable Caching</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Cache-Single-Book-Reads"><span class="nav-number">10.3.3.</span> <span class="nav-text">2. Cache Single Book Reads</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Precise-Single-Cache-Eviction"><span class="nav-number">10.3.4.</span> <span class="nav-text">3. Precise Single Cache Eviction</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-Critical-Setting-Making-id-Expression-Work"><span class="nav-number">10.3.5.</span> <span class="nav-text">4. Critical Setting: Making #id Expression Work</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Strategy-Advantages"><span class="nav-number">10.3.6.</span> <span class="nav-text">Strategy Advantages</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%9A%80-Performance-Boost-Java-21-Virtual-Threads"><span class="nav-number">11.</span> <span class="nav-text">ğŸš€ Performance Boost: Java 21 Virtual Threads</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Traditional-Thread-Problems"><span class="nav-number">11.1.</span> <span class="nav-text">Traditional Thread Problems</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Virtual-Thread-Advantages"><span class="nav-number">11.2.</span> <span class="nav-text">Virtual Thread Advantages</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-to-Enable"><span class="nav-number">11.3.</span> <span class="nav-text">How to Enable?</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%94%AC-Modern-Observability-Part-1-Spring%E2%80%99s-Implementation"><span class="nav-number">12.</span> <span class="nav-text">ğŸ”¬ Modern Observability - Part 1: Springâ€™s Implementation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring%E2%80%99s-Modern-Observability-Philosophy"><span class="nav-number">12.1.</span> <span class="nav-text">Springâ€™s Modern Observability Philosophy</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Observed-The-Tool-for-Observing-Core-Business-Logic"><span class="nav-number">12.2.</span> <span class="nav-text">@Observed: The Tool for Observing Core Business Logic</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Why-Not-Use-SDK-or-Java-Agent-Directly"><span class="nav-number">12.2.1.</span> <span class="nav-text">Why Not Use SDK or Java Agent Directly?</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Observed-Setup-and-Practice-Guide"><span class="nav-number">12.3.</span> <span class="nav-text">@Observed Setup and Practice Guide</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-1-Add-Core-Dependencies"><span class="nav-number">12.3.1.</span> <span class="nav-text">Step 1: Add Core Dependencies</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-2-Enable-Global-Switch"><span class="nav-number">12.3.2.</span> <span class="nav-text">Step 2: Enable Global Switch</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-3-Configure-Async-Tracing-if-your-project-uses-it"><span class="nav-number">12.3.3.</span> <span class="nav-text">Step 3: Configure Async Tracing (if your project uses it)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-4-Apply-Annotation-in-Business-Logic"><span class="nav-number">12.3.4.</span> <span class="nav-text">Step 4: Apply Annotation in Business Logic</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Advanced-Tracing-Using-Baggage-to-Inject-High-Cardinality-Business-Context-Optional"><span class="nav-number">12.4.</span> <span class="nav-text">Advanced Tracing: Using Baggage to Inject High Cardinality Business Context (Optional)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-1-Configure-Baggage-Fields-in-application-yml"><span class="nav-number">12.4.1.</span> <span class="nav-text">Step 1: Configure Baggage Fields in application.yml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-2-Set-Baggage-Value-in-Controller"><span class="nav-number">12.4.2.</span> <span class="nav-text">Step 2: Set Baggage Value in Controller</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Step-3-Verify-Results-in-Grafana-Tempo"><span class="nav-number">12.4.3.</span> <span class="nav-text">Step 3: Verify Results in Grafana Tempo</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#From-Technical-Monitoring-to-Business-Insights"><span class="nav-number">12.5.</span> <span class="nav-text">From Technical Monitoring to Business Insights</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%94%AC-Modern-Observability-Part-2-Working-with-OpenTelemetry"><span class="nav-number">13.</span> <span class="nav-text">ğŸ”¬ Modern Observability - Part 2: Working with OpenTelemetry</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Overall-Architecture-Diagram"><span class="nav-number">13.1.</span> <span class="nav-text">Overall Architecture Diagram</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Layered-Architecture-Decoupling-and-Collaboration"><span class="nav-number">13.2.</span> <span class="nav-text">Layered Architecture: Decoupling and Collaboration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Package-Responsibilities-and-Data-Flow"><span class="nav-number">13.3.</span> <span class="nav-text">Key Package Responsibilities and Data Flow</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Runtime-View"><span class="nav-number">13.4.</span> <span class="nav-text">Runtime View</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Journey-of-an-API-Request"><span class="nav-number">13.4.1.</span> <span class="nav-text">Journey of an API Request</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%94%AC-Modern-Observability-Part-3-Exploring-Telemetry-Data-in-Grafana"><span class="nav-number">14.</span> <span class="nav-text">ğŸ”¬ Modern Observability - Part 3: Exploring Telemetry Data in Grafana</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Grafana-Navigation-and-Data-Sources"><span class="nav-number">14.1.</span> <span class="nav-text">Grafana Navigation and Data Sources</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Art-of-Tracing-Using-Tempo-and-TraceQL"><span class="nav-number">14.2.</span> <span class="nav-text">The Art of Tracing: Using Tempo and TraceQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Power-of-Metrics-Using-Mimir-and-PromQL"><span class="nav-number">14.3.</span> <span class="nav-text">The Power of Metrics: Using Mimir and PromQL</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#OTLP-to-Prometheus-Name-Conversion"><span class="nav-number">14.3.1.</span> <span class="nav-text">OTLP to Prometheus Name Conversion</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Useful-PromQL-Queries"><span class="nav-number">14.3.2.</span> <span class="nav-text">Useful PromQL Queries</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#The-Magic-of-Exemplars"><span class="nav-number">14.3.3.</span> <span class="nav-text">The Magic of Exemplars</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Log-Correlation-Using-Loki-and-LogQL"><span class="nav-number">14.4.</span> <span class="nav-text">Log Correlation: Using Loki and LogQL</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%94%AC-Modern-Observability-Part-4-Full-Stack-Tracing-with-Grafana-Faro-Integration-Optional"><span class="nav-number">15.</span> <span class="nav-text">ğŸ”¬ Modern Observability - Part 4: Full-Stack Tracing with Grafana Faro Integration (Optional)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Grafana-Faro-Integration-Implementation"><span class="nav-number">15.1.</span> <span class="nav-text">Grafana Faro Integration Implementation</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Frontend-Tracing-Configuration-src-main-resources-static-index-html"><span class="nav-number">15.1.1.</span> <span class="nav-text">Frontend Tracing Configuration (src&#x2F;main&#x2F;resources&#x2F;static&#x2F;index.html)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Automatic-Frontend-Backend-Trace-Correlation"><span class="nav-number">15.1.2.</span> <span class="nav-text">Automatic Frontend-Backend Trace Correlation</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Full-Stack-Trace-Effect-in-Tempo"><span class="nav-number">15.2.</span> <span class="nav-text">Full-Stack Trace Effect in Tempo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Useful-Full-Stack-Trace-Queries"><span class="nav-number">15.3.</span> <span class="nav-text">Useful Full-Stack Trace Queries</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Query-Frontend-Traces"><span class="nav-number">15.3.1.</span> <span class="nav-text">1. Query Frontend Traces</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Query-Backend-Traces"><span class="nav-number">15.3.2.</span> <span class="nav-text">2. Query Backend Traces</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Query-Complete-Frontend-Backend-Chains"><span class="nav-number">15.3.3.</span> <span class="nav-text">3. Query Complete Frontend-Backend Chains</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-Analyze-Cross-Service-Performance"><span class="nav-number">15.3.4.</span> <span class="nav-text">4. Analyze Cross-Service Performance</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-Trace-Specific-Business-Operations"><span class="nav-number">15.3.5.</span> <span class="nav-text">5. Trace Specific Business Operations</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Faro-Integration-Advantages"><span class="nav-number">15.4.</span> <span class="nav-text">Faro Integration Advantages</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Real-World-Application-Scenarios"><span class="nav-number">15.5.</span> <span class="nav-text">Real-World Application Scenarios</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Environment-and-Configuration"><span class="nav-number">16.</span> <span class="nav-text">Environment and Configuration</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Containerized-Environment-compose-yaml"><span class="nav-number">16.1.</span> <span class="nav-text">Containerized Environment (compose.yaml)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Application-Configuration-application-yml"><span class="nav-number">16.2.</span> <span class="nav-text">Application Configuration (application.yml)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Monitoring"><span class="nav-number">17.</span> <span class="nav-text">Monitoring</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#VS-Code-Extension-Recommendations"><span class="nav-number">17.1.</span> <span class="nav-text">VS Code Extension Recommendations</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%93%8B-Best-Practices-Checklist"><span class="nav-number">18.</span> <span class="nav-text">ğŸ“‹ Best Practices Checklist</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Development-Phase"><span class="nav-number">18.1.</span> <span class="nav-text">Development Phase</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Deployment-Phase"><span class="nav-number">18.2.</span> <span class="nav-text">Deployment Phase</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%93%9A-Further-Learning-Resources"><span class="nav-number">19.</span> <span class="nav-text">ğŸ“š Further Learning Resources</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Official-Documentation"><span class="nav-number">19.1.</span> <span class="nav-text">Official Documentation</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Summary"><span class="nav-number">20.</span> <span class="nav-text">Summary</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Sam Zhu"
      src="https://i.imgur.com/eLloI4N.png">
  <p class="site-author-name" itemprop="name">Sam Zhu</p>
  <div class="site-description" itemprop="description">Hello, I'm Sam, a tech-savvy blogger with a passion for programming. I share insights on programming, cloud computing, and more, including topics like SpringBoot, SpringCloud, GCP. My blog aims to assist both newcomers and professionals in these fields.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">59</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">74</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/samzhu" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;samzhu" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/samzhu0318" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;samzhu0318" rel="noopener me" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://blog.samzhu.dev/2025/07/24/A-Developer-s-Guide-to-Spring-Boot-3-Exploring-Modern-Practices/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.imgur.com/eLloI4N.png">
      <meta itemprop="name" content="Sam Zhu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sam's programming note">
      <meta itemprop="description" content="Hello, I'm Sam, a tech-savvy blogger with a passion for programming. I share insights on programming, cloud computing, and more, including topics like SpringBoot, SpringCloud, GCP. My blog aims to assist both newcomers and professionals in these fields.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="A Developer's Guide to Spring Boot 3 - Exploring Modern Practices | Sam's programming note">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          A Developer's Guide to Spring Boot 3 - Exploring Modern Practices
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2025-07-24 00:00:00 / Modified: 23:41:45" itemprop="dateCreated datePublished" datetime="2025-07-24T00:00:00+08:00">2025-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/SoftwareDevelopment/" itemprop="url" rel="index"><span itemprop="name">SoftwareDevelopment</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>This guide will walk you through a project built with Java 21, Spring Boot 3, and Gradle. Our goal isnâ€™t just to write working code - we want to make sure the project is robust, fast, and easy to maintain in the future.</p>
<p>Weâ€™ll start with basic setup, then explore database JPA, version control with Liquibase, and Redis caching. After that, weâ€™ll focus on â€œobservabilityâ€ - learning how to monitor your appâ€™s health using Micrometer and OpenTelemetry (OTLP), and send all monitoring data to Grafana for analysis.</p>
<p>This guide is perfect for developers who want to learn modern Spring Boot 3 practices.</p>
<span id="more"></span>

<h2 id="ğŸš€-Quick-Start"><a href="#ğŸš€-Quick-Start" class="headerlink" title="ğŸš€ Quick Start"></a>ğŸš€ Quick Start</h2><h3 id="Start-the-Application"><a href="#Start-the-Application" class="headerlink" title="Start the Application"></a>Start the Application</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Start with local development settings</span></span><br><span class="line">./gradlew bootRun --args=<span class="string">&#x27;--spring.profiles.active=local-env,local&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="Verify-Everything-Works"><a href="#Verify-Everything-Works" class="headerlink" title="Verify Everything Works"></a>Verify Everything Works</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Check application health</span></span><br><span class="line">curl http://localhost:8080/actuator/health</span><br><span class="line"></span><br><span class="line"><span class="comment"># Test API - Add a book</span></span><br><span class="line">curl --location <span class="string">&#x27;http://localhost:8080/books&#x27;</span> \</span><br><span class="line">--header <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">--data <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">    &quot;title&quot;: &quot;Test Book&quot;,</span></span><br><span class="line"><span class="string">    &quot;author&quot;: &quot;Test Author&quot;,</span></span><br><span class="line"><span class="string">    &quot;isbn&quot;: &quot;9780123456789&quot;,</span></span><br><span class="line"><span class="string">    &quot;price&quot;: 299.99</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>Success response:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Test Book&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Test Author&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;isbn&quot;</span><span class="punctuation">:</span> <span class="string">&quot;9780123456789&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;publishYear&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="number">299.99</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;createdAt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-06-19T16:28:01.217281+08:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;updatedAt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-06-19T16:28:01.217292+08:00&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Failed response (duplicate book):</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;about:blank&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bad Request&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">400</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;detail&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISBN already exists&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;instance&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/books&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Error messages follow RFC 9457 format. See <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-ann-rest-exceptions.html">Spring Framework Reference</a> for details.</p>
<p>View Swagger UI (API docs and test interface)<br>Open browser: <a target="_blank" rel="noopener" href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a></p>
<p>View Grafana monitoring<br>Open browser: <a target="_blank" rel="noopener" href="http://localhost:3000/">http://localhost:3000</a></p>
<h3 id="ğŸ“š-Suggested-Learning-Path-for-beginners"><a href="#ğŸ“š-Suggested-Learning-Path-for-beginners" class="headerlink" title="ğŸ“š Suggested Learning Path (for beginners)"></a>ğŸ“š Suggested Learning Path (for beginners)</h3><p>If youâ€™re new to these technologies, follow this order:</p>
<ol>
<li><p><strong>Basic Features</strong> (1-2 days)</p>
<ul>
<li>Get the project running and test basic CRUD APIs</li>
<li>Understand Spring Bootâ€™s auto-configuration magic</li>
<li>Get familiar with Swagger UI</li>
</ul>
</li>
<li><p><strong>Data Processing</strong> (2-3 days)  </p>
<ul>
<li>Learn how JPA works with databases</li>
<li>Understand how Liquibase manages database versions</li>
<li>Implement MapStruct object mapping</li>
</ul>
</li>
<li><p><strong>Performance Optimization</strong> (1-2 days)</p>
<ul>
<li>Experience Redis caching benefits</li>
<li>See virtual thread performance improvements</li>
</ul>
</li>
<li><p><strong>Monitoring &amp; Observability</strong> (3-4 days)</p>
<ul>
<li>Learn to use Grafana to check system status</li>
<li>Understand what @Observed annotation does</li>
<li>Master distributed tracing concepts</li>
</ul>
</li>
<li><p><strong>Deployment Practice</strong> (2-3 days)</p>
<ul>
<li>Try different environment configurations</li>
<li>Understand containerized deployment</li>
</ul>
</li>
</ol>
<p><strong>ğŸ’¡ Tip</strong>: Donâ€™t rush to learn everything at once. Get the basics working first, then gradually dive into advanced features. Hands-on practice at each stage gives the best learning experience!</p>
<hr>
<h2 id="Software-Architecture"><a href="#Software-Architecture" class="headerlink" title="Software Architecture"></a>Software Architecture</h2><p>Hereâ€™s how the project works:</p>
<p><img src="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/software_architecture.jpg" alt="Software Architecture"></p>
<ul>
<li><strong>WebController</strong>: Receives user actions, like button clicks</li>
<li><strong>AppService</strong>: Handles main business logic, the systemâ€™s core</li>
<li><strong>Repository &#x2F; CacheService</strong>: Talks to database (PostgreSQL) and cache (Redis), handles data storage</li>
<li><strong>DomainModel</strong>: Defines system objects, like what properties a book should have</li>
</ul>
<hr>
<h2 id="ğŸ“-Project-Structure-Overview"><a href="#ğŸ“-Project-Structure-Overview" class="headerlink" title="ğŸ“ Project Structure Overview"></a>ğŸ“ Project Structure Overview</h2><p>This project uses a common layered architecture. Different types of code go in different folders - like organizing clothes, pants, and socks separately. This makes finding and changing things much easier later.</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ build.gradle                                         # Gradle build script, defines tools and packages needed</span><br><span class="line">â”œâ”€â”€ build/generated/openapi/                             # Auto-generated during compile time, no manual management needed</span><br><span class="line">â”‚   â””â”€â”€ src/main/java/com/example/demo/</span><br><span class="line">â”‚       â””â”€â”€ interfaces/                                  # Interface layer: All external system interaction code</span><br><span class="line">â”‚           â”œâ”€â”€ api/                                     # - (Auto-generated) API interfaces from openapi.yaml</span><br><span class="line">â”‚           â””â”€â”€ dto/                                     # - (Auto-generated) Data transfer objects from openapi.yaml</span><br><span class="line">â”œâ”€â”€ config/                                              # Environment-specific config files, not packaged into final app</span><br><span class="line">â”‚   â”œâ”€â”€ application-local.yml                            # Settings for &quot;local&quot; environment (your computer)</span><br><span class="line">â”‚   â”œâ”€â”€ application-ut.yml                               # Settings for &quot;ut&quot; environment (unit tests)</span><br><span class="line">â”‚   â”œâ”€â”€ application-sit.yml                              # Settings for &quot;sit&quot; environment (integration tests)</span><br><span class="line">â”‚   â””â”€â”€ application-prod-example.yml                     # Template for &quot;prod&quot; environment (passwords stored elsewhere)</span><br><span class="line">â”œâ”€â”€ compose.yaml                                         # Docker config - one click to set up all services locally</span><br><span class="line">â”œâ”€â”€ dev-resources/</span><br><span class="line">â”‚   â””â”€â”€ openapi.yaml                                     # API specification file (single source of truth for all APIs)</span><br><span class="line">â””â”€â”€ src/</span><br><span class="line">    â”œâ”€â”€ main/</span><br><span class="line">    â”‚   â”œâ”€â”€ java/com/example/demo/</span><br><span class="line">    â”‚   â”‚   â”œâ”€â”€ applications/                            # Application layer (Service): Core business logic</span><br><span class="line">    â”‚   â”‚   â”œâ”€â”€ config/                                  # Configuration layer: Various Spring configs</span><br><span class="line">    â”‚   â”‚   â”œâ”€â”€ infrastructure/                          # Infrastructure layer: Database communication interfaces</span><br><span class="line">    â”‚   â”‚   â”œâ”€â”€ interfaces/                              # Interface layer: All external system interaction code</span><br><span class="line">    â”‚   â”‚   â”‚   â”œâ”€â”€ mapper/                              # - Tools for converting between DTOs and database entities</span><br><span class="line">    â”‚   â”‚   â”‚   â””â”€â”€ rest/                                # - API implementation code (Controllers)</span><br><span class="line">    â”‚   â”‚   â”œâ”€â”€ models/                                  # Model layer: Database table definitions (JPA Entities)</span><br><span class="line">    â”‚   â”‚   â””â”€â”€ DemoApplication.java                     # Spring Boot application entry point</span><br><span class="line">    â”‚   â””â”€â”€ resources/</span><br><span class="line">    â”‚       â”œâ”€â”€ application.yml                          # Basic, shared Spring Boot config</span><br><span class="line">    â”‚       â”œâ”€â”€ application-gcp.yml                      # Config for Google Cloud Platform (GCP)</span><br><span class="line">    â”‚       â”œâ”€â”€ application-aws.yml                      # Config for Amazon Web Services (AWS)</span><br><span class="line">    â”‚       â””â”€â”€ db/changelog/                            # Liquibase database change scripts</span><br><span class="line">    â”‚           â”œâ”€â”€ db.changelog-master.yaml             # Main changelog file</span><br><span class="line">    â”‚           â””â”€â”€ history/                             # All historical change records</span><br><span class="line">    â””â”€â”€ test/                                            # Test code</span><br><span class="line">        â””â”€â”€ java/com/example/demo/</span><br><span class="line">            â”œâ”€â”€ TestDemoApplication.java</span><br><span class="line">            â”œâ”€â”€ TestcontainersConfiguration.java         # Testcontainers config</span><br><span class="line">            â””â”€â”€ DemoApplicationTests.java                # Integration tests</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ§©-Core-Technologies-Key-Dependencies"><a href="#ğŸ§©-Core-Technologies-Key-Dependencies" class="headerlink" title="ğŸ§© Core Technologies &amp; Key Dependencies"></a>ğŸ§© Core Technologies &amp; Key Dependencies</h2><p>This project is built with a set of widely-used industry technologies.</p>
<h3 id="Languages-Frameworks"><a href="#Languages-Frameworks" class="headerlink" title="Languages&#x2F;Frameworks"></a>Languages&#x2F;Frameworks</h3><ul>
<li><strong>Java 21</strong>: Latest long-term support version with new features like virtual threads</li>
<li><strong>Spring Boot 3.5.x</strong>: Latest enterprise Java framework with built-in monitoring and auto-configuration</li>
</ul>
<h3 id="Build-Tools-Plugins"><a href="#Build-Tools-Plugins" class="headerlink" title="Build Tools &amp; Plugins"></a>Build Tools &amp; Plugins</h3><p>These tools help us build and manage the project.</p>
<ul>
<li><strong><code>org.springframework.boot</code></strong> Spring Bootâ€™s core tool. Makes it easy to start projects and package everything into a single runnable file.</li>
<li><strong><code>io.spring.dependency-management</code></strong> Springâ€™s dependency management tool. It manages all package versions for us, so we donâ€™t need to specify each version manually.</li>
<li><strong><code>org.openapi.generator</code></strong> Core tool for â€œAPI Firstâ€ approach. It reads <code>openapi.yaml</code> and automatically generates Java interfaces and data models (DTOs), keeping code and API docs always in sync.</li>
<li><strong><code>com.gorylenko.gradle-git-properties</code></strong> Generates a <code>git.properties</code> file with current Git version info (branch, commit). This way we always know which version is running in production.</li>
<li><strong><code>org.cyclonedx.bom</code></strong> Software Bill of Materials (SBOM) generator. It scans the project and lists all third-party packages used. Essential for checking known security vulnerabilities and license compliance.</li>
<li><strong><code>jacoco</code></strong> Code test coverage tool. Generates reports showing how complete our tests are.</li>
</ul>
<h3 id="Key-Dependencies"><a href="#Key-Dependencies" class="headerlink" title="Key Dependencies"></a>Key Dependencies</h3><p>These are the core packages needed at runtime.</p>
<h4 id="API-Web-Layer"><a href="#API-Web-Layer" class="headerlink" title="API &amp; Web Layer"></a>API &amp; Web Layer</h4><ul>
<li><strong><code>spring-boot-starter-web</code></strong> Essential for building RESTful APIs. Includes embedded server (Tomcat) and Spring MVC framework.</li>
<li><strong><code>spring-boot-starter-validation</code></strong> Data validation tool. Lets us use annotations like <code>@NotNull</code>, <code>@Size</code> on DTOs to set data rules. Spring automatically checks incoming data when APIs receive requests.</li>
<li><strong><code>springdoc-openapi-starter-webmvc-ui</code></strong> Automatically generates interactive API documentation (Swagger UI). This webpage lets us test APIs directly in the browser based on our code and API specs.</li>
<li><strong><code>mapstruct</code></strong> and <strong><code>mapstruct-processor</code></strong> Object mapping tool. Automatically generates code to convert between DTOs and database entities, avoiding lots of repetitive get&#x2F;set code.</li>
<li><strong><code>jackson-databind-nullable</code></strong> Helper package for handling the difference between <code>null</code> and â€œnot provided (undefined)â€ in JSON. Especially useful for partial updates (PATCH) - lets us tell if a user intentionally set a field to <code>null</code> or just didnâ€™t touch it.</li>
</ul>
<h4 id="Data-Access-Cache-Layer"><a href="#Data-Access-Cache-Layer" class="headerlink" title="Data Access &amp; Cache Layer"></a>Data Access &amp; Cache Layer</h4><ul>
<li><strong><code>spring-boot-starter-data-jpa</code></strong> Simplifies database operations. Makes CRUD (Create, Read, Update, Delete) operations easy.</li>
<li><strong><code>liquibase-core</code></strong> Database version control tool. Lets us manage database structure changes with files, like using Git for code. Ensures consistent database structure across all development environments.</li>
<li><strong><code>spring-boot-starter-cache</code></strong> Provides standard caching API. We can easily add caching with annotations like <code>@Cacheable</code> without worrying about the underlying cache technology.</li>
<li><strong><code>spring-boot-starter-data-redis</code></strong> Redis integration package. When used with <code>spring-boot-starter-cache</code>, Spring Boot automatically uses Redis as our cache storage.</li>
</ul>
<h4 id="Observability-Layer"><a href="#Observability-Layer" class="headerlink" title="Observability Layer"></a>Observability Layer</h4><ul>
<li><strong><code>spring-boot-starter-actuator</code></strong> Foundation of observability. Provides monitoring and management endpoints like <code>/actuator/health</code> for checking application health.</li>
<li><strong><code>spring-boot-starter-aop</code></strong> Enables <code>@Observed</code> annotation. Provides â€œAspect-Oriented Programmingâ€ technology that lets monitoring tools automatically add metrics and tracing logic around our code.</li>
<li><strong><code>io.micrometer:micrometer-tracing-bridge-otel</code></strong> A bridge that translates Micrometer tracing commands into OpenTelemetry format.</li>
<li><strong><code>io.opentelemetry:opentelemetry-exporter-otlp</code></strong> An exporter that packages traces and logs into OTLP format and sends them to backend monitoring systems.</li>
<li><strong><code>io.opentelemetry.instrumentation:opentelemetry-spring-boot-starter</code></strong> OpenTelemetry auto-configuration tool. Simplifies integration complexity and automatically integrates OTel features (like sending logs) into Spring Boot projects.</li>
<li><strong><code>io.micrometer:micrometer-registry-otlp</code></strong> Metrics exporter. Converts Micrometer-collected metrics to OTLP format and sends them out.</li>
<li><strong><code>io.micrometer:micrometer-registry-prometheus</code></strong> Prometheus metrics endpoint. Provides another way to view metrics at <code>/actuator/prometheus</code>, creating a page for Prometheus systems to read. Very useful for local development.</li>
</ul>
<hr>
<h2 id="âš™ï¸-Environment-Configuration-Settings-Management"><a href="#âš™ï¸-Environment-Configuration-Settings-Management" class="headerlink" title="âš™ï¸ Environment Configuration &amp; Settings Management"></a>âš™ï¸ Environment Configuration &amp; Settings Management</h2><h3 id="Configuration-File-Loading-Priority"><a href="#Configuration-File-Loading-Priority" class="headerlink" title="Configuration File Loading Priority"></a>Configuration File Loading Priority</h3><p>Spring Boot loads configuration files in this priority:</p>
<ol>
<li><strong><code>application.yml</code></strong> - Base shared configuration</li>
<li><strong><code>application-&#123;profile&#125;.yml</code></strong> - Environment-specific configuration (overrides base config)</li>
</ol>
<p>During development, Spring also reads files in the <code>config/</code> folder, like <code>application-local.yml</code> designed for local development.</p>
<h3 id="Configuration-File-Architecture"><a href="#Configuration-File-Architecture" class="headerlink" title="Configuration File Architecture"></a>Configuration File Architecture</h3><p>Our configuration files use a layered design to handle different environments and deployment platforms properly.</p>
<h4 id="Base-Configuration-Files-src-main-resources"><a href="#Base-Configuration-Files-src-main-resources" class="headerlink" title="Base Configuration Files (src/main/resources/)"></a>Base Configuration Files (<code>src/main/resources/</code>)</h4><p>These files are packaged into the Docker image, containing shared settings for all environments or platform-specific optimizations.</p>
<table>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>application.yml</code></td>
<td>Base shared settings</td>
<td>Basic configuration shared by all environments</td>
</tr>
<tr>
<td><code>application-gcp.yml</code></td>
<td>Google Cloud Platform</td>
<td>Enables GCP-specific service integrations</td>
</tr>
<tr>
<td><code>application-aws.yml</code></td>
<td>Amazon Web Services</td>
<td>Enables AWS-specific service integrations</td>
</tr>
</tbody></table>
<p><strong>GCP Environment Example</strong>:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># application-gcp.yml</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">import:</span> <span class="string">sm@</span>  <span class="comment"># Enable Google Secret Manager</span></span><br><span class="line"></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoint:</span></span><br><span class="line">    <span class="attr">health:</span></span><br><span class="line">      <span class="attr">group:</span></span><br><span class="line">        <span class="attr">gcp:</span></span><br><span class="line">          <span class="attr">include:</span> <span class="string">&quot;db,pubsub,gcs,spanner&quot;</span>  <span class="comment"># GCP service health checks</span></span><br></pre></td></tr></table></figure>

<h4 id="Environment-Specific-Configuration-config"><a href="#Environment-Specific-Configuration-config" class="headerlink" title="Environment-Specific Configuration (config/)"></a>Environment-Specific Configuration (<code>config/</code>)</h4><p>These files are <strong>NOT</strong> packaged into the Docker image - they must be mounted externally during deployment. This design follows the <a target="_blank" rel="noopener" href="https://12factor.net/">12-Factor App Codebase</a> principle, allowing the same code to run in different environments.</p>
<table>
<thead>
<tr>
<th>File</th>
<th>Environment</th>
<th>Description</th>
<th>Key Features</th>
</tr>
</thead>
<tbody><tr>
<td><code>application-local.yml</code></td>
<td>Local development</td>
<td>Developer machine settings</td>
<td>Detailed logs, SQL display, full monitoring</td>
</tr>
<tr>
<td><code>application-sit.yml</code></td>
<td>System integration test</td>
<td>SIT test environment</td>
<td>Full tracing, detailed logs, all endpoints open</td>
</tr>
<tr>
<td><code>application-uat.yml</code></td>
<td>User acceptance test</td>
<td>UAT test environment</td>
<td>Medium sampling, limited endpoints, near-production config</td>
</tr>
<tr>
<td><code>application-prod-example.yml</code></td>
<td>Production template</td>
<td>Production config reference</td>
<td>Low sampling, security config, performance optimization</td>
</tr>
</tbody></table>
<h3 id="Multi-Environment-Startup-Examples"><a href="#Multi-Environment-Startup-Examples" class="headerlink" title="Multi-Environment Startup Examples"></a>Multi-Environment Startup Examples</h3><h4 id="Local-Development"><a href="#Local-Development" class="headerlink" title="Local Development"></a>Local Development</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Pure local environment</span></span><br><span class="line">./gradlew bootRun --args=<span class="string">&#x27;--spring.profiles.active=local&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="Test-Environments"><a href="#Test-Environments" class="headerlink" title="Test Environments"></a>Test Environments</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SIT environment (local or standalone server)</span></span><br><span class="line">./gradlew bootRun --args=<span class="string">&#x27;--spring.profiles.active=sit&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># SIT environment on GCP</span></span><br><span class="line">./gradlew bootRun --args=<span class="string">&#x27;--spring.profiles.active=sit,gcp&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># SIT environment on AWS</span></span><br><span class="line">./gradlew bootRun --args=<span class="string">&#x27;--spring.profiles.active=sit,aws&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="ğŸ¯-Configuration-Best-Practices"><a href="#ğŸ¯-Configuration-Best-Practices" class="headerlink" title="ğŸ¯ Configuration Best Practices"></a>ğŸ¯ Configuration Best Practices</h3><h4 id="Dynamic-Version-Injection"><a href="#Dynamic-Version-Injection" class="headerlink" title="Dynamic Version Injection"></a>Dynamic Version Injection</h4><p>We use <code>@project.version@</code> to dynamically load the version from <code>build.gradle</code>:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">&#x27;@project.version@&#x27;</span> <span class="comment"># Automatically replaced with actual version during compile</span></span><br></pre></td></tr></table></figure>

<p>This ensures:</p>
<ul>
<li>âœ… Version stays consistent with build.gradle</li>
<li>âœ… Avoids manual version update errors</li>
<li>âœ… Monitoring systems can correctly track service versions</li>
</ul>
<h3 id="Configuration-Security-Best-Practices"><a href="#Configuration-Security-Best-Practices" class="headerlink" title="Configuration Security Best Practices"></a>Configuration Security Best Practices</h3><h4 id="ğŸ”-Handling-Sensitive-Information"><a href="#ğŸ”-Handling-Sensitive-Information" class="headerlink" title="ğŸ” Handling Sensitive Information"></a>ğŸ” Handling Sensitive Information</h4><p><strong>Never</strong> put sensitive info (passwords, API keys, tokens) directly in config files. Recommended approaches:</p>
<ol>
<li><p><strong>Environment Variables</strong>:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">$&#123;db.password&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Cloud Secret Manager</strong>:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GCP</span></span><br><span class="line"><span class="attr">db.password:</span> <span class="string">$&#123;sm@project_db_password&#125;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="ğŸ“Š-Environment-Specific-Tuning"><a href="#ğŸ“Š-Environment-Specific-Tuning" class="headerlink" title="ğŸ“Š Environment-Specific Tuning"></a>ğŸ“Š Environment-Specific Tuning</h4><p>Different environments should have different performance settings:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># application-local.yml (development)</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">tracing:</span></span><br><span class="line">    <span class="attr">sampling:</span></span><br><span class="line">      <span class="attr">probability:</span> <span class="number">1.0</span>  <span class="comment"># 100% sampling for debugging</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># application-prod.yml (production)</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">tracing:</span></span><br><span class="line">    <span class="attr">sampling:</span></span><br><span class="line">      <span class="attr">probability:</span> <span class="number">0.1</span>  <span class="comment"># 10% sampling to reduce performance impact</span></span><br></pre></td></tr></table></figure>

<h3 id="VSCode-Development-Setup"><a href="#VSCode-Development-Setup" class="headerlink" title="VSCode Development Setup"></a>VSCode Development Setup</h3><p>We recommend creating <code>.vscode/launch.json</code> to simplify development. This file lets you start and debug Spring Boot applications directly in VSCode without typing long commands in the terminal.</p>
<h4 id="Create-via-VSCode-Command-Palette-Recommended"><a href="#Create-via-VSCode-Command-Palette-Recommended" class="headerlink" title="Create via VSCode Command Palette (Recommended)"></a>Create via VSCode Command Palette (Recommended)</h4><ol>
<li><strong>Open Command Palette</strong>: Use <code>Ctrl+Shift+P</code> (Windows&#x2F;Linux) or <code>Cmd+Shift+P</code> (macOS)</li>
<li><strong>Search Command</strong>: Type <code>Java: Run and Debug</code> and select it</li>
<li><strong>Select Main Class</strong>: VSCode will scan the project, choose <code>com.example.demo.DemoApplication</code></li>
<li><strong>Auto-generate Config</strong>: This automatically creates <code>.vscode/launch.json</code> in the project root</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DemoApplication&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;mainClass&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.example.demo.DemoApplication&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;projectName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;demo-springboot-250613&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;spring.profiles.active&quot;</span><span class="punctuation">:</span> <span class="string">&quot;local-env,local&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ› ï¸-Development-Setup"><a href="#ğŸ› ï¸-Development-Setup" class="headerlink" title="ğŸ› ï¸ Development &amp; Setup"></a>ğŸ› ï¸ Development &amp; Setup</h2><h3 id="Development-Guide"><a href="#Development-Guide" class="headerlink" title="Development Guide"></a>Development Guide</h3><ul>
<li>When <code>openapi.yaml</code> changes, manually run <code>./gradlew clean openApiGenerate</code> to regenerate API code</li>
<li>Use <code>./gradlew bootRun --args=&#39;--spring.profiles.active=local&#39;</code> to start with <code>local</code> profile</li>
<li>During local development, visit <code>http://localhost:8080/swagger-ui.html</code> to view and test APIs</li>
</ul>
<h3 id="IDE-Integration"><a href="#IDE-Integration" class="headerlink" title="IDE Integration"></a>IDE Integration</h3><p>For VSCode and other IDE development setup, see the detailed instructions in <strong>âš™ï¸ Environment Configuration &amp; Settings Management</strong> section above.</p>
<hr>
<h2 id="ğŸ¤-API-First-Development-Workflow"><a href="#ğŸ¤-API-First-Development-Workflow" class="headerlink" title="ğŸ¤ API First Development Workflow"></a>ğŸ¤ API First Development Workflow</h2><p>This project follows <strong>API First</strong> development - â€œdefine API specs first, then write codeâ€.</p>
<p>We write all API details (like paths, parameters, response formats) in <code>openapi.yaml</code>. This file is our single, final standard - the <strong>â€œSingle Source of Truthâ€</strong>. This ensures API documentation and actual code always stay in sync.</p>
<h3 id="How-It-Works"><a href="#How-It-Works" class="headerlink" title="How It Works"></a>How It Works</h3><p>We use the <code>org.openapi.generator</code> Gradle tool for automation. When you compile the project, it:</p>
<ol>
<li><strong>Reads Spec</strong>: Reads the <code>dev-resources/openapi.yaml</code> file</li>
<li><strong>Generates Code</strong>: Automatically generates corresponding Java interfaces and DTOs</li>
<li><strong>Includes in Build</strong>: Treats generated code as part of the source code</li>
<li><strong>Developer Implementation</strong>: Developers focus on business logic, implementing the generated interfaces</li>
</ol>
<h3 id="Key-Settings-in-build-gradle"><a href="#Key-Settings-in-build-gradle" class="headerlink" title="Key Settings in build.gradle"></a>Key Settings in build.gradle</h3><p>Letâ€™s look at the <code>openApiGenerate</code> task configuration:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">tasks.named(<span class="string">&#x27;openApiGenerate&#x27;</span>) &#123;</span><br><span class="line">    generatorName.set(<span class="string">&quot;spring&quot;</span>)</span><br><span class="line">    library.set(<span class="string">&quot;spring-cloud&quot;</span>)</span><br><span class="line">    inputSpec.set(layout.projectDirectory.file(<span class="string">&quot;dev-resources/openapi.yaml&quot;</span>).asFile.path) <span class="comment">// Where the API spec is</span></span><br><span class="line">    outputDir.set(layout.buildDirectory.dir(<span class="string">&quot;generated/openapi&quot;</span>).get().asFile.path)      <span class="comment">// Where generated code goes</span></span><br><span class="line">    apiPackage.set(<span class="string">&quot;com.example.demo.interfaces.api&quot;</span>)   <span class="comment">// Package for generated API interfaces</span></span><br><span class="line">    modelPackage.set(<span class="string">&quot;com.example.demo.interfaces.dto&quot;</span>) <span class="comment">// Package for generated DTOs</span></span><br><span class="line">    configOptions.set([</span><br><span class="line">        <span class="symbol">hateoas:</span> <span class="string">&quot;false&quot;</span>,</span><br><span class="line">        <span class="symbol">interfaceOnly:</span> <span class="string">&quot;true&quot;</span>,        <span class="comment">// âœ¨ Generate interfaces only, not implementations</span></span><br><span class="line">        <span class="symbol">useResponseEntity:</span> <span class="string">&quot;true&quot;</span>,    <span class="comment">// âœ¨ Use Spring&#x27;s ResponseEntity&lt;T&gt; for API responses</span></span><br><span class="line">        <span class="symbol">useSpringBoot3:</span> <span class="string">&quot;true&quot;</span>,       <span class="comment">// âœ¨ Ensure compatibility with Spring Boot 3</span></span><br><span class="line">        <span class="symbol">useTags:</span> <span class="string">&quot;true&quot;</span>,              <span class="comment">// âœ¨ Group APIs by &quot;tags&quot; in YAML</span></span><br><span class="line">        <span class="symbol">unhandledException:</span> <span class="string">&quot;true&quot;</span>    <span class="comment">// âœ¨ Force developers to handle all possible errors</span></span><br><span class="line">    ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Important Parameters Explained:</strong></p>
<ul>
<li><p><code>interfaceOnly: &quot;true&quot;</code></p>
<ul>
<li><strong>Purpose</strong>: Only generates Java <code>interface</code>, not actual <code>Controller</code> implementation classes</li>
<li><strong>Benefit</strong>: Gives developers flexibility to implement business logic freely</li>
</ul>
</li>
<li><p><code>useSpringBoot3: &quot;true&quot;</code></p>
<ul>
<li><strong>Purpose</strong>: Ensures generated code is compatible with Spring Boot 3</li>
<li><strong>Impact</strong>: Uses latest Jakarta EE specs instead of old <code>javax</code></li>
</ul>
</li>
<li><p><code>useTags: &quot;true&quot;</code></p>
<ul>
<li><strong>Purpose</strong>: In <code>openapi.yaml</code>, you can add <code>tags</code> to APIs. This setting generates different API interface files based on tags</li>
<li><strong>Benefit</strong>: Avoids cramming all APIs into one huge file, making code more maintainable</li>
</ul>
</li>
<li><p><code>useResponseEntity: &quot;true&quot;</code></p>
<ul>
<li><strong>Purpose</strong>: Makes API methods return Springâ€™s <code>ResponseEntity&lt;T&gt;</code></li>
<li><strong>Benefit</strong>: Gives precise control over HTTP response codes (like 200, 201, 404) and headers</li>
</ul>
</li>
<li><p><code>unhandledException: &quot;true&quot;</code></p>
<ul>
<li><strong>Purpose</strong>: Adds <code>throws Exception</code> to generated interface methods</li>
<li><strong>Goal</strong>: Forces developers to think about and handle possible errors</li>
</ul>
</li>
<li><p><code>hateoas: &quot;false&quot;</code></p>
<ul>
<li><strong>Purpose</strong>: Disables HATEOAS functionality (a style where API responses include related operation links, usually not needed for regular REST APIs)</li>
</ul>
</li>
</ul>
<p>The <code>interfaceOnly: &quot;true&quot;</code> setting is key - it generates only API â€œspecificationsâ€ and data models, while Controller â€œimplementationsâ€ are done by developers. This cleanly separates â€œAPI definitionâ€ from â€œbusiness logic implementationâ€.</p>
<h3 id="Benefits-of-API-First"><a href="#Benefits-of-API-First" class="headerlink" title="Benefits of API First"></a>Benefits of API First</h3><ul>
<li><strong>Contract as Documentation</strong>: <code>openapi.yaml</code> itself is the most accurate, up-to-date API documentation</li>
<li><strong>Enforced Consistency</strong>: Since our <code>BookController</code> must implement the <code>BooksApi</code> interface, any spec-breaking changes fail at compile time</li>
<li><strong>Parallel Development</strong>: While backend developers build API features, frontend developers or other teams can use <code>openapi.yaml</code> to generate client stubs or mock servers for development and testing</li>
</ul>
<hr>
<h2 id="ğŸ—ºï¸-Object-Mapping-MapStruct"><a href="#ğŸ—ºï¸-Object-Mapping-MapStruct" class="headerlink" title="ğŸ—ºï¸ Object Mapping (MapStruct)"></a>ğŸ—ºï¸ Object Mapping (MapStruct)</h2><p>We use these two packages:</p>
<ul>
<li><code>org.mapstruct:mapstruct</code></li>
<li><code>org.mapstruct:mapstruct-processor</code></li>
</ul>
<h3 id="Purpose"><a href="#Purpose" class="headerlink" title="Purpose"></a>Purpose</h3><p>In layered architecture, we donâ€™t want to pass database entities directly to frontend or external users. Instead, we create special Data Transfer Objects (DTOs).</p>
<p>MapStruct is a tool for â€œobject conversionâ€. It automatically generates code to convert between Entities and DTOs.</p>
<h3 id="Benefits"><a href="#Benefits" class="headerlink" title="Benefits"></a>Benefits</h3><ul>
<li><strong>Great Performance</strong>: It generates actual Java conversion code at compile time without reflection, so itâ€™s very fast</li>
<li><strong>Type Safety</strong>: If field names or types donâ€™t match during conversion, compilation fails, catching errors early</li>
<li><strong>Less Boilerplate</strong>: Developers just define a conversion interface, MapStruct generates all the get&#x2F;set mapping code automatically</li>
</ul>
<h3 id="Key-Settings-in-build-gradle-1"><a href="#Key-Settings-in-build-gradle-1" class="headerlink" title="Key Settings in build.gradle"></a>Key Settings in build.gradle</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">tasks.withType(JavaCompile) &#123;</span><br><span class="line">    options.compilerArgs = [</span><br><span class="line">        <span class="comment">// Tell MapStruct to generate converters as Spring Beans for easy injection</span></span><br><span class="line">        <span class="string">&#x27;-Amapstruct.defaultComponentModel=spring&#x27;</span>,</span><br><span class="line">        <span class="comment">// Don&#x27;t include timestamps in generated code, ensures identical builds</span></span><br><span class="line">        <span class="string">&#x27;-Amapstruct.suppressGeneratorTimestamp=true&#x27;</span>,</span><br><span class="line">        <span class="comment">// Enable detailed logs during build for debugging</span></span><br><span class="line">        <span class="string">&#x27;-Amapstruct.verbose=true&#x27;</span>,</span><br><span class="line">        <span class="comment">// Preserve method parameter names, crucial for Spring Cache to parse SpEL expressions (like #id)</span></span><br><span class="line">        <span class="string">&#x27;-parameters&#x27;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Mapper-Interface-Definition-BookMapper-java"><a href="#Mapper-Interface-Definition-BookMapper-java" class="headerlink" title="Mapper Interface Definition (BookMapper.java)"></a>Mapper Interface Definition (<code>BookMapper.java</code>)</h3><p>We define a <code>BookMapper</code> interface with <code>@Mapper</code> annotation to tell MapStruct itâ€™s a converter. With <code>componentModel = &quot;spring&quot;</code>, the generated <code>BookMapperImpl</code> class automatically gets <code>@Component</code> annotation, making it injectable as a Spring Bean.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper(</span></span><br><span class="line"><span class="meta">    unmappedTargetPolicy = ReportingPolicy.IGNORE,  // Ignore unmapped properties in target object, avoid compile warnings</span></span><br><span class="line"><span class="meta">    nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE // When source property is null, don&#x27;t update target property</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookMapper</span> &#123;</span><br><span class="line">    <span class="comment">// Convert BookDto (DTO) to Book (Entity)</span></span><br><span class="line">    Book <span class="title function_">toEntity</span><span class="params">(BookDto dto)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Convert Book (Entity) to BookDto (DTO)</span></span><br><span class="line">    BookDto <span class="title function_">toDto</span><span class="params">(Book entity)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Usage-Example"><a href="#Usage-Example" class="headerlink" title="Usage Example"></a>Usage Example</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span> <span class="comment">// Lombok annotation, creates constructor for final fields with injection</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> <span class="keyword">implements</span> <span class="title class_">BooksApi</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BookService bookService;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BookMapper bookMapper; <span class="comment">// âœ¨ MapStruct-generated converter injected here</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;BookDto&gt; <span class="title function_">booksPost</span><span class="params">(<span class="meta">@Valid</span> BookRequest bookRequest)</span> &#123;</span><br><span class="line">        <span class="comment">// Call mapper to convert frontend Request DTO to database Entity</span></span><br><span class="line">        <span class="type">Book</span> <span class="variable">bookEntity</span> <span class="operator">=</span> bookMapper.toEntity(bookRequest);</span><br><span class="line"></span><br><span class="line">        <span class="type">Book</span> <span class="variable">createdBook</span> <span class="operator">=</span> bookService.createBook(bookEntity);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Call mapper to convert database Entity to frontend Response DTO</span></span><br><span class="line">        <span class="type">BookDto</span> <span class="variable">responseDto</span> <span class="operator">=</span> bookMapper.toDto(createdBook);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.CREATED).body(responseDto);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ“œ-Database-Version-Control-Liquibase"><a href="#ğŸ“œ-Database-Version-Control-Liquibase" class="headerlink" title="ğŸ“œ Database Version Control (Liquibase)"></a>ğŸ“œ Database Version Control (Liquibase)</h2><p>In team development, managing database schema changes is a big challenge. If everyone randomly modifies their local database or relies on JPAâ€™s <code>ddl-auto: update</code>, itâ€™s easy to end up with different database structures, causing weird errors.</p>
<p>This project uses Liquibase to manage database structure changes like code. This ensures consistent and trackable database structures from development to testing to production.</p>
<h3 id="Why-Not-Use-ddl-auto"><a href="#Why-Not-Use-ddl-auto" class="headerlink" title="Why Not Use ddl-auto?"></a>Why Not Use ddl-auto?</h3><p>While <code>spring.jpa.hibernate.ddl-auto = update</code> is convenient in early development, it has serious problems:</p>
<ul>
<li><strong>No Precise Control</strong>: You canâ€™t control exactly what SQL commands it generates</li>
<li><strong>Possible Data Loss</strong>: In some cases, it might misjudge and delete columns or tables</li>
<li><strong>No Version History</strong>: You have no idea when, who, or what changed the database</li>
<li><strong>Not for Production</strong>: Never use <code>update</code> in production environments</li>
</ul>
<p>Liquibase solves these problems with a more rigorous process.</p>
<h3 id="How-Liquibase-Works"><a href="#How-Liquibase-Works" class="headerlink" title="How Liquibase Works"></a>How Liquibase Works</h3><ul>
<li><strong>Automatic Execution</strong>: When Spring Boot starts, it detects Liquibase and automatically runs database updates</li>
<li><strong>Changelog</strong>: Developers write all database modifications (like creating tables, adding columns) in â€œchangelogâ€ files. We use YAML format here</li>
<li><strong>Tracking Tables</strong>: Liquibase creates two management tables in your database: <code>DATABASECHANGELOG</code> and <code>DATABASECHANGELOGLOCK</code><ul>
<li><code>DATABASECHANGELOGLOCK</code>: A lock ensuring only one application instance executes database changes at a time, avoiding conflicts</li>
<li><code>DATABASECHANGELOG</code>: A record table. Every successfully executed change is recorded here. Each time the app starts, Liquibase compares the changelog file with this table, executing only new changes not yet recorded</li>
</ul>
</li>
</ul>
<h3 id="Project-Implementation"><a href="#Project-Implementation" class="headerlink" title="Project Implementation"></a>Project Implementation</h3><h4 id="Master-Changelog"><a href="#Master-Changelog" class="headerlink" title="Master Changelog"></a>Master Changelog</h4><p>This is Liquibaseâ€™s entry file at <code>src/main/resources/db/changelog/db.changelog-master.yaml</code>. It doesnâ€™t contain actual SQL changes but acts like a table of contents, referencing other change files.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># db.changelog-master.yaml</span></span><br><span class="line"><span class="attr">databaseChangeLog:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">include:</span></span><br><span class="line">      <span class="attr">file:</span> <span class="string">history/20250614.yaml</span></span><br><span class="line">      <span class="attr">relativeToChangelogFile:</span> <span class="literal">true</span> <span class="comment"># Path relative to this master file</span></span><br><span class="line">      <span class="attr">description:</span> <span class="string">Initialize</span> <span class="string">tables</span></span><br><span class="line">  <span class="comment"># âœ¨ When you have new changes, add another include below</span></span><br><span class="line">  <span class="comment"># - include:</span></span><br><span class="line">  <span class="comment">#     file: history/20250615.yaml</span></span><br><span class="line">  <span class="comment">#     relativeToChangelogFile: true</span></span><br><span class="line">  <span class="comment">#     description: Add user table</span></span><br></pre></td></tr></table></figure>

<h4 id="Changeset-Files"><a href="#Changeset-Files" class="headerlink" title="Changeset Files"></a>Changeset Files</h4><p>All actual database structure changes are defined in these files. We put them in the <code>history/</code> folder, named by date for easy tracking. One file can contain multiple <code>changeSet</code>s. Each <code>changeSet</code> is an independent, immutable database operation unit, uniquely identified by <code>id</code> and <code>author</code>.</p>
<p>Example <code>history/20250614.yaml</code>:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># history/20250614.yaml</span></span><br><span class="line"><span class="attr">databaseChangeLog:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">changeSet:</span></span><br><span class="line">    <span class="attr">id:</span> <span class="number">1749857749130</span><span class="number">-1</span> <span class="comment"># Unique ID, can be number, string, or auto-generated</span></span><br><span class="line">    <span class="attr">author:</span> <span class="string">samzhu</span> <span class="string">(generated)</span></span><br><span class="line">    <span class="attr">changes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">createTable:</span></span><br><span class="line">        <span class="attr">tableName:</span> <span class="string">book</span></span><br><span class="line">        <span class="attr">remarks:</span> <span class="string">Book</span> <span class="string">table</span> <span class="string">for</span> <span class="string">storing</span> <span class="string">book</span> <span class="string">information</span></span><br><span class="line">        <span class="attr">columns:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">column:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">id</span></span><br><span class="line">            <span class="attr">type:</span> <span class="string">INTEGER</span></span><br><span class="line">            <span class="attr">autoIncrement:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">constraints:</span></span><br><span class="line">              <span class="attr">primaryKey:</span> <span class="literal">true</span></span><br><span class="line">              <span class="attr">nullable:</span> <span class="literal">false</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">column:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">title</span></span><br><span class="line">            <span class="attr">type:</span> <span class="string">VARCHAR(255)</span></span><br><span class="line">            <span class="attr">constraints:</span></span><br><span class="line">              <span class="attr">nullable:</span> <span class="literal">false</span></span><br><span class="line">        <span class="comment">#... other columns...</span></span><br></pre></td></tr></table></figure>

<h4 id="Development-Workflow-How-to-Add-a-Database-Change"><a href="#Development-Workflow-How-to-Add-a-Database-Change" class="headerlink" title="Development Workflow: How to Add a Database Change"></a>Development Workflow: How to Add a Database Change</h4><p>Letâ€™s say you need to add a <code>stock_quantity</code> column to the <code>book</code> table.</p>
<ol>
<li><p><strong>Create New File</strong>: Create a new YAML file in <code>src/main/resources/db/changelog/history/</code>, like <code>20250616-add-stock-to-book.yaml</code></p>
</li>
<li><p><strong>Define ChangeSet</strong>: Write your change in the new file. Remember <code>id</code> must be unique</p>
</li>
<li><p><strong>Update Master File</strong>: Go back to <code>db.changelog-master.yaml</code> and <code>include</code> the new file</p>
 <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">databaseChangeLog:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">include:</span></span><br><span class="line">      <span class="attr">file:</span> <span class="string">history/20250614.yaml</span></span><br><span class="line">      <span class="attr">relativeToChangelogFile:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">description:</span> <span class="string">Initialize</span> <span class="string">tables</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">include:</span> <span class="comment"># âœ¨ Add this section</span></span><br><span class="line">      <span class="attr">file:</span> <span class="string">history/20250616-add-stock-to-book.yaml</span></span><br><span class="line">      <span class="attr">relativeToChangelogFile:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">description:</span> <span class="string">Add</span> <span class="string">stock</span> <span class="string">column</span> <span class="string">to</span> <span class="string">book</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Start Application</strong>: Restart Spring Boot. Liquibase checks the <code>DATABASECHANGELOG</code> table, finds this new <code>changeSet</code> hasnâ€™t been executed, and runs the corresponding <code>ALTER TABLE</code> SQL command to add the new column</p>
</li>
</ol>
<p>This process ensures every database change is recorded, trackable, and automatically applied consistently across all team members and environments.</p>
<hr>
<h2 id="âš¡ï¸-Caching-Mechanism-Spring-Cache-Redis"><a href="#âš¡ï¸-Caching-Mechanism-Spring-Cache-Redis" class="headerlink" title="âš¡ï¸ Caching Mechanism (Spring Cache + Redis)"></a>âš¡ï¸ Caching Mechanism (Spring Cache + Redis)</h2><p>To speed up application response times and reduce database load, weâ€™ve implemented caching. For data that doesnâ€™t change often but is read frequently, caching can dramatically improve performance.</p>
<p>This project uses <strong>Spring Cache</strong> as the unified caching standard with <strong>Redis</strong> as the actual cache implementation.</p>
<h3 id="Spring-Cache-Consistent-Cache-Abstraction"><a href="#Spring-Cache-Consistent-Cache-Abstraction" class="headerlink" title="Spring Cache: Consistent Cache Abstraction"></a>Spring Cache: Consistent Cache Abstraction</h3><p><code>spring-boot-starter-cache</code> provides a standard caching API. Its biggest benefit is letting our business logic code not worry about the underlying cache technology. Developers just need to learn a few standard annotations to add caching functionality.</p>
<ul>
<li><code>@EnableCaching</code>: Used on configuration classes, the master switch to enable Spring Cache</li>
<li><code>@Cacheable</code>: Used on data reading methods. When this method is called, Spring first checks the cache. If data exists, it returns directly from cache without executing the method. If not, it executes the method, stores the result in cache, then returns it</li>
<li><code>@CacheEvict</code>: Used on data modification or deletion methods. When data changes, this annotation clears old data from cache to avoid users seeing stale content</li>
</ul>
<h3 id="Redis-High-Performance-Cache-Implementation"><a href="#Redis-High-Performance-Cache-Implementation" class="headerlink" title="Redis: High-Performance Cache Implementation"></a>Redis: High-Performance Cache Implementation</h3><p>We chose Redis as our cache server. Thanks to Spring Bootâ€™s powerful auto-configuration, integrating Redis is very simple:</p>
<ol>
<li>Add <code>spring-boot-starter-data-redis</code> dependency in <code>build.gradle</code></li>
<li>Configure Redis connection in <code>application.yml</code></li>
</ol>
<p>With just these two steps, Spring Boot automatically sets Redis as our default cache implementation.</p>
<h3 id="Cache-Implementation"><a href="#Cache-Implementation" class="headerlink" title="Cache Implementation"></a>Cache Implementation</h3><p>Letâ€™s look at the cache design in <code>BookService</code>.</p>
<h4 id="Strategy-Only-Cache-High-Frequency-Single-Item-Reads"><a href="#Strategy-Only-Cache-High-Frequency-Single-Item-Reads" class="headerlink" title="Strategy: Only Cache High-Frequency Single Item Reads"></a>Strategy: Only Cache High-Frequency Single Item Reads</h4><p>In our project, we use a more precise caching strategy. We found that â€œget all booksâ€ (<code>getAllBooks()</code>) might return lots of data, and if any book changes, the entire list cache becomes invalid - not very efficient.</p>
<p>Therefore, our strategy is: <strong>Only cache <code>getBookById(id)</code> - single item reads with high usage frequency</strong>.</p>
<h4 id="1-Enable-Caching"><a href="#1-Enable-Caching" class="headerlink" title="1. Enable Caching"></a>1. Enable Caching</h4><p>We enable caching in <code>CacheConfig.java</code> and define cache space names.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main/java/com/example/demo/config/CacheConfig.java</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableCaching</span> <span class="comment">// âœ¨ Master switch to enable caching</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheConfig</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Define a cache space named &quot;books&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BOOKS_CACHE</span> <span class="operator">=</span> <span class="string">&quot;books&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-Cache-Single-Book-Reads"><a href="#2-Cache-Single-Book-Reads" class="headerlink" title="2. Cache Single Book Reads"></a>2. Cache Single Book Reads</h4><p>We only add <code>@Cacheable</code> annotation to the <code>getBookById</code> method. Note the <code>key</code> syntax - we use a little trick to create more meaningful keys.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main/java/com/example/demo/applications/BookService.java</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get book by ID.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Cacheable</span> stores results in &#x27;books&#x27; cache space,</span></span><br><span class="line"><span class="comment">     * using &#x27;book_&#123;id&#125;&#x27; as key.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Cacheable(cacheNames = CacheConfig.BOOKS_CACHE, key = &quot;&#x27;book_&#x27; + #id&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getBookById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="comment">// âœ¨ This log only prints on cache miss</span></span><br><span class="line">        log.info(<span class="string">&quot;Fetching book from database, ID: &#123;&#125;&quot;</span>, id);</span><br><span class="line">        <span class="keyword">return</span> bookRepository.findById(id)</span><br><span class="line">           .orElseThrow(() -&gt; <span class="keyword">new</span> <span class="title class_">ResponseStatusException</span>(HttpStatus.NOT_FOUND, <span class="string">&quot;Book not found&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>key = &quot;&#39;book_&#39; + #id&quot;</code>: This is a good practice. It adds a <code>book_</code> prefix to all book-related cache keys. When <code>id</code> is <code>123</code>, the Redis key becomes <code>book_123</code> instead of just <code>123</code>. This greatly improves readability and avoids confusion with other numeric ID caches (like <code>user_123</code>).</p>
<h4 id="3-Precise-Single-Cache-Eviction"><a href="#3-Precise-Single-Cache-Eviction" class="headerlink" title="3. Precise Single Cache Eviction"></a>3. Precise Single Cache Eviction</h4><p>Since we donâ€™t cache the entire book list, when updating or deleting a book, we donâ€™t need to clear all book caches. We only need to precisely clear the cache for that specific modified or deleted book.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main/java/com/example/demo/applications/BookService.java</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Update book.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@CacheEvict</span> only clears the specific &#x27;book_&#123;id&#125;&#x27; entry in &#x27;books&#x27; cache.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="meta">@CacheEvict(cacheNames = CacheConfig.BOOKS_CACHE, key = &quot;&#x27;book_&#x27; + #id&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">updateBook</span><span class="params">(Integer id, Book book)</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Delete book.</span></span><br><span class="line"><span class="comment">     * Similarly, only clears the deleted book&#x27;s cache.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="meta">@CacheEvict(cacheNames = CacheConfig.BOOKS_CACHE, key = &quot;&#x27;book_&#x27; + #id&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteBook</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>createBook</code> (add new book) method now doesnâ€™t need any <code>@CacheEvict</code> annotation. Adding a new book doesnâ€™t make any existing cached data â€œoldâ€ or â€œwrongâ€.</p>
<h4 id="4-Critical-Setting-Making-id-Expression-Work"><a href="#4-Critical-Setting-Making-id-Expression-Work" class="headerlink" title="4. Critical Setting: Making #id Expression Work"></a>4. Critical Setting: Making <code>#id</code> Expression Work</h4><p>When we use SpEL expressions like <code>key = &quot;#id&quot;</code> in <code>@Cacheable</code> or <code>@CacheEvict</code>, weâ€™re telling Spring: â€œPlease use this methodâ€™s <code>id</code> parameter as the cache keyâ€.</p>
<p>But how does Spring know which parameter is called <code>id</code>? By default, the Java compiler doesnâ€™t preserve method parameter names (like <code>id</code>, <code>book</code>) in compiled <code>.class</code> files to save space. This causes Spring Cache to fail when parsing <code>#id</code>, throwing errors.</p>
<p>To fix this, we must explicitly tell the compiler to preserve parameter names. Just add one setting in <code>build.gradle</code>:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">tasks.withType(JavaCompile) &#123;</span><br><span class="line">    options.compilerArgs = [</span><br><span class="line">        <span class="string">&#x27;-Amapstruct.defaultComponentModel=spring&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;-Amapstruct.suppressGeneratorTimestamp=true&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;-Amapstruct.verbose=true&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;-parameters&#x27;</span> <span class="comment">// âœ¨ This is the key!</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>With the <code>-parameters</code> compiler flag, Spring Cache gets enough information to correctly parse <code>#id</code> as the <code>id</code> parameter value in <code>getBookById(Integer id)</code> method, making our dynamic cache keys work properly. This setting is shared by all tools in the project that depend on parameter names (including MapStruct).</p>
<h4 id="Strategy-Advantages"><a href="#Strategy-Advantages" class="headerlink" title="Strategy Advantages"></a>Strategy Advantages</h4><p>This â€œcache single items onlyâ€ strategy is simpler and more efficient:</p>
<ul>
<li><strong>Simple Logic</strong>: No more worrying about when to clear list caches</li>
<li><strong>Performance Boost</strong>: Directly helps the most common â€œget details by IDâ€ scenario</li>
<li><strong>Minimal Write Impact</strong>: Updates or deletes have minimal cache impact, only affecting one key without touching other valid cached data</li>
</ul>
<hr>
<h2 id="ğŸš€-Performance-Boost-Java-21-Virtual-Threads"><a href="#ğŸš€-Performance-Boost-Java-21-Virtual-Threads" class="headerlink" title="ğŸš€ Performance Boost: Java 21 Virtual Threads"></a>ğŸš€ Performance Boost: Java 21 Virtual Threads</h2><p>This project enables a heavyweight new Java 21 feature: <strong>Virtual Threads</strong>.</p>
<h3 id="Traditional-Thread-Problems"><a href="#Traditional-Thread-Problems" class="headerlink" title="Traditional Thread Problems"></a>Traditional Thread Problems</h3><p>In traditional Java applications, each Thread maps to an operating system thread. For network services that need lots of waiting (like waiting for database responses, external API responses), this wastes resources. When a thread is waiting, itâ€™s not doing work but still occupying a precious system thread slot, limiting the number of concurrent requests the system can handle.</p>
<h3 id="Virtual-Thread-Advantages"><a href="#Virtual-Thread-Advantages" class="headerlink" title="Virtual Thread Advantages"></a>Virtual Thread Advantages</h3><p>Virtual threads are ultra-lightweight threads managed by the JVM itself. Thousands of virtual threads can run on just a few traditional system threads. When a virtual thread needs to wait for I&#x2F;O:</p>
<ol>
<li>It doesnâ€™t block the underlying system thread</li>
<li>The JVM â€œpausesâ€ it and lets that system thread run another virtual threadâ€™s task</li>
<li>When the I&#x2F;O operation completes, the JVM â€œwakes upâ€ the original virtual thread to continue</li>
</ol>
<p>This mechanism can greatly increase application throughput, letting us handle more concurrent requests with less hardware.</p>
<h3 id="How-to-Enable"><a href="#How-to-Enable" class="headerlink" title="How to Enable?"></a>How to Enable?</h3><p>In Spring Boot 3.2+, enabling virtual threads is very simple - just add one line to <code>application.yml</code>:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">threads:</span></span><br><span class="line">    <span class="attr">virtual:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>This tells Spring Boot to use virtual threads to handle all incoming HTTP requests.</p>
<hr>
<h2 id="ğŸ”¬-Modern-Observability-Part-1-Springâ€™s-Implementation"><a href="#ğŸ”¬-Modern-Observability-Part-1-Springâ€™s-Implementation" class="headerlink" title="ğŸ”¬ Modern Observability - Part 1: Springâ€™s Implementation"></a>ğŸ”¬ Modern Observability - Part 1: Springâ€™s Implementation</h2><p>â€œObservabilityâ€ solves a core problem: when our application is running in production, how can we know whatâ€™s happening inside? This helps us quickly find problems and optimize performance. This system is usually built on three pillars: <strong>Metrics</strong>, <strong>Traces</strong>, and <strong>Logs</strong>.</p>
<p>These are the â€œThree Pillars of Observabilityâ€:</p>
<ul>
<li><p><strong>ğŸ“Š Metrics</strong>: Numerical values aggregated over time</p>
<ul>
<li>How many people access my API per second?</li>
<li>Whatâ€™s the average response time?</li>
<li>How high is the error rate?</li>
</ul>
</li>
<li><p><strong>ğŸ” Traces</strong>: The complete journey of a request from entering the system, through different services, to returning results</p>
<ul>
<li>What steps did an API request go through?</li>
<li>How long did each step take?</li>
<li>Which step was slowest?</li>
</ul>
</li>
<li><p><strong>ğŸ“ Logs</strong>: Records of individual events in the system</p>
<ul>
<li>What happened at a specific time?</li>
<li>Whatâ€™s the detailed error message?</li>
<li>What did the user do?</li>
</ul>
</li>
</ul>
<h3 id="Springâ€™s-Modern-Observability-Philosophy"><a href="#Springâ€™s-Modern-Observability-Philosophy" class="headerlink" title="Springâ€™s Modern Observability Philosophy"></a>Springâ€™s Modern Observability Philosophy</h3><p>Before writing any monitoring code, we need to understand Spring Boot 3â€™s observability philosophy. Micrometerâ€™s core developer Jonatan Ivanov said:</p>
<blockquote>
<p>â€œIn these apps I donâ€™t create any Observations manually because basically everything that I would need is automatically instrumentedâ€¦â€</p>
</blockquote>
<p>This reveals a core idea: <strong>Rely on Automatic Instrumentation First</strong>.</p>
<p>When we add <code>spring-boot-starter-actuator</code> and related packages to our project, the Spring Boot ecosystem automatically monitors lots of common operations for us, including:</p>
<ul>
<li>Incoming HTTP requests</li>
<li>Outgoing RestTemplate requests</li>
<li>Database JDBC queries</li>
<li>Redis operations</li>
<li>â€¦and more</li>
</ul>
<p>This means without doing anything, we can see these infrastructure-level metrics and traces in the monitoring backend.</p>
<p>So when do we need to do it ourselves?<br><strong>Answer: When automatic instrumentation canâ€™t reach our custom core business logic that we want to observe deeply.</strong></p>
<p>For example, in our <code>BookService</code>, the <code>createBook</code> method includes multiple steps like â€œcheck ISBN, set timestamps, save to databaseâ€. We want to monitor the entire <code>createBook</code> operation as a meaningful business unit. This is where the <code>@Observed</code> annotation comes in.</p>
<h3 id="Observed-The-Tool-for-Observing-Core-Business-Logic"><a href="#Observed-The-Tool-for-Observing-Core-Business-Logic" class="headerlink" title="@Observed: The Tool for Observing Core Business Logic"></a><code>@Observed</code>: The Tool for Observing Core Business Logic</h3><p>Micrometer is Springâ€™s official observability facade, providing a standard API that lets our code focus on â€œwhat to observeâ€ without worrying about technical details.</p>
<p>The <code>@Observed</code> annotation is the best practice for adding observability to our custom business logic. As Jonatan Ivanov said:</p>
<blockquote>
<p>â€œThe ideaâ€¦ was that we want the users to instrument their code once using a single API and have multiple benefits out of it (e.g. metrics, tracing, logging).â€</p>
</blockquote>
<p>This is the core principle of <code>@Observed</code>: <strong>â€œInstrument once, multiple benefitsâ€</strong>.</p>
<h4 id="Why-Not-Use-SDK-or-Java-Agent-Directly"><a href="#Why-Not-Use-SDK-or-Java-Agent-Directly" class="headerlink" title="Why Not Use SDK or Java Agent Directly?"></a>Why Not Use SDK or Java Agent Directly?</h4><ul>
<li><strong>Compared to using OpenTelemetry SDK directly</strong>: Using SDK directly requires lots of manual code to start&#x2F;end traces, set attributes, etc. - tedious and error-prone. <code>@Observed</code> handles all this with a simple annotation.</li>
<li><strong>Compared to using OpenTelemetry Java Agent</strong>: Agent is effective for automatically monitoring known third-party packages (like database drivers), but it doesnâ€™t understand the business meaning of your custom methods (like <code>createBook</code>). <code>@Observed</code> lets you give this operation a meaningful name, making monitoring charts easier to understand.</li>
</ul>
<p><code>@Observed</code> strikes a great balance between â€œsimple convenienceâ€ and â€œpowerful functionalityâ€. Itâ€™s more concise than direct SDK use, yet more flexible than Java Agent for monitoring custom business logic.</p>
<h3 id="Observed-Setup-and-Practice-Guide"><a href="#Observed-Setup-and-Practice-Guide" class="headerlink" title="@Observed Setup and Practice Guide"></a><code>@Observed</code> Setup and Practice Guide</h3><p>In Spring Boot 3, setting up <code>@Observed</code> is already very simple.</p>
<h4 id="Step-1-Add-Core-Dependencies"><a href="#Step-1-Add-Core-Dependencies" class="headerlink" title="Step 1: Add Core Dependencies"></a>Step 1: Add Core Dependencies</h4><p>In <code>build.gradle</code>, ensure these two key dependencies:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle</span></span><br><span class="line">dependencies &#123;</span><br><span class="line">    <span class="comment">// Provides foundation for Micrometer observability, cornerstone of all observability features</span></span><br><span class="line">    implementation <span class="string">&#x27;org.springframework.boot:spring-boot-starter-actuator&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Provides AOP (Aspect-Oriented Programming) capability, the technical foundation for @Observed</span></span><br><span class="line">    implementation <span class="string">&#x27;org.springframework.boot:spring-boot-starter-aop&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Step-2-Enable-Global-Switch"><a href="#Step-2-Enable-Global-Switch" class="headerlink" title="Step 2: Enable Global Switch"></a>Step 2: Enable Global Switch</h4><p>In <code>application.yml</code>, turn on annotation-based observability:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># src/main/resources/application.yml</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">observations:</span></span><br><span class="line">    <span class="attr">annotations:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># Master switch for @Observed functionality</span></span><br></pre></td></tr></table></figure>

<h4 id="Step-3-Configure-Async-Tracing-if-your-project-uses-it"><a href="#Step-3-Configure-Async-Tracing-if-your-project-uses-it" class="headerlink" title="Step 3: Configure Async Tracing (if your project uses it)"></a>Step 3: Configure Async Tracing (if your project uses it)</h4><p>Since Spring Boot 3.2, the core component <code>ObservedAspect</code> needed by <code>@Observed</code> is auto-configured - you donâ€™t need to declare it manually.</p>
<p>Now, only when your project uses asynchronous operations like <code>@Async</code>, to ensure tracing information (like <code>traceId</code>) propagates correctly between threads, you need to create this configuration:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main/java/com/example/demo/config/ObservabilityConfig.java</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObservabilityConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * To propagate tracing info in <span class="doctag">@Async</span> threads,</span></span><br><span class="line"><span class="comment">     * we need to configure a TaskExecutor.</span></span><br><span class="line"><span class="comment">     * ContextPropagatingTaskDecorator automatically copies current thread&#x27;s</span></span><br><span class="line"><span class="comment">     * tracing context (like traceId) to the new thread executing <span class="doctag">@Async</span> tasks,</span></span><br><span class="line"><span class="comment">     * ensuring trace chain completeness.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> TaskExecutor <span class="title function_">taskExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ThreadPoolTaskExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolTaskExecutor</span>();</span><br><span class="line">        executor.setTaskDecorator(<span class="keyword">new</span> <span class="title class_">ContextPropagatingTaskDecorator</span>());</span><br><span class="line">        <span class="keyword">return</span> executor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Note</strong>: If your project doesnâ€™t use <code>@Async</code> at all, you donâ€™t even need to create the <code>ObservabilityConfig.java</code> file.</p>
<h4 id="Step-4-Apply-Annotation-in-Business-Logic"><a href="#Step-4-Apply-Annotation-in-Business-Logic" class="headerlink" title="Step 4: Apply Annotation in Business Logic"></a>Step 4: Apply Annotation in Business Logic</h4><p>In <code>BookService</code>, we use advanced <code>@Observed</code> features to add meaningful business names and custom tags to monitoring.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main/java/com/example/demo/applications/BookService.java</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Cacheable(cacheNames = CacheConfig.BOOKS_CACHE, key = &quot;&#x27;book_&#x27; + #id&quot;)</span></span><br><span class="line">    <span class="meta">@Observed(</span></span><br><span class="line"><span class="meta">        name = &quot;book.details.view&quot;,</span></span><br><span class="line"><span class="meta">        contextualName = &quot;View Book Details&quot;,</span></span><br><span class="line"><span class="meta">        lowCardinalityKeyValues = &#123;</span></span><br><span class="line"><span class="meta">            &quot;operation&quot;, &quot;get_by_id&quot;,</span></span><br><span class="line"><span class="meta">            &quot;cache_enabled&quot;, &quot;true&quot;</span></span><br><span class="line"><span class="meta">        &#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getBookById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="comment">//... business logic...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="meta">@CacheEvict(cacheNames = CacheConfig.BOOKS_CACHE, key = &quot;&#x27;book_&#x27; + #id&quot;)</span></span><br><span class="line">    <span class="meta">@Observed(</span></span><br><span class="line"><span class="meta">        name = &quot;book.inventory.update&quot;,</span></span><br><span class="line"><span class="meta">        contextualName = &quot;Update Book Info&quot;,</span></span><br><span class="line"><span class="meta">        lowCardinalityKeyValues = &#123;</span></span><br><span class="line"><span class="meta">            &quot;operation&quot;, &quot;update&quot;,</span></span><br><span class="line"><span class="meta">            &quot;cache_evict&quot;, &quot;single&quot;,</span></span><br><span class="line"><span class="meta">            &quot;business_impact&quot;, &quot;medium&quot;</span></span><br><span class="line"><span class="meta">        &#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">updateBook</span><span class="params">(Integer id, Book book)</span> &#123;</span><br><span class="line">        <span class="comment">//... business logic...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@Observed</code> annotation parameters explained:</p>
<ul>
<li><strong><code>name</code></strong>: Metric name (<code>book.details.view</code>). We use â€œdomain.subdomain.actionâ€ naming style for easier categorization and filtering in monitoring systems.</li>
<li><strong><code>contextualName</code></strong>: Trace Span name (<code>View Book Details</code>). We use plain business terms so even non-engineers can understand what each step means in trace charts.</li>
<li><strong><code>lowCardinalityKeyValues</code></strong>: Very useful feature. It lets us add custom Key-Value tags to metrics and traces.<ul>
<li><strong>What is Low Cardinality?</strong> â€œCardinalityâ€ refers to the number of different possible values a tag can have. â€œLow cardinalityâ€ means the values are limited and predictable (e.g., <code>operation</code> can only be <code>create</code>, <code>update</code>, <code>delete</code>). We should only put low cardinality tags here.</li>
<li><strong>Never</strong> put high cardinality values (like <code>book_id</code>, <code>user_id</code>) here - this causes monitoring system index explosion and performance problems.</li>
<li><strong>How to use</strong>: Provide in <code>&#123; &quot;key1&quot;, &quot;value1&quot;, &quot;key2&quot;, &quot;value2&quot; &#125;</code> format.</li>
</ul>
</li>
</ul>
<h3 id="Advanced-Tracing-Using-Baggage-to-Inject-High-Cardinality-Business-Context-Optional"><a href="#Advanced-Tracing-Using-Baggage-to-Inject-High-Cardinality-Business-Context-Optional" class="headerlink" title="Advanced Tracing: Using Baggage to Inject High Cardinality Business Context (Optional)"></a>Advanced Tracing: Using Baggage to Inject High Cardinality Business Context (Optional)</h3><p>We mentioned that <code>lowCardinalityKeyValues</code> <strong>should not</strong> store high cardinality data like <code>book_id</code> or <code>user_id</code>. So the question is: if I need to trace the complete request chain for a specific <code>book_id</code>, how do I do it?</p>
<p>The answer is using <strong>Baggage</strong>.</p>
<p>Baggage is a powerful concept in OpenTelemetry. Think of it as a â€œcarry-on luggageâ€ that travels with requests through the system. You can put a business ID (like <code>book-id: 123</code>) into this luggage at the request entry point (e.g., Controller), and this ID will automatically propagate through the entire call chain, even across multiple microservices.</p>
<p>This is an optional but extremely useful technique that can improve debugging and troubleshooting efficiency by an order of magnitude.</p>
<h4 id="Step-1-Configure-Baggage-Fields-in-application-yml"><a href="#Step-1-Configure-Baggage-Fields-in-application-yml" class="headerlink" title="Step 1: Configure Baggage Fields in application.yml"></a>Step 1: Configure Baggage Fields in <code>application.yml</code></h4><p>First, we need to explicitly tell Micrometer Tracing which Baggage fields we want to track.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># src/main/resources/application.yml</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">tracing:</span></span><br><span class="line">    <span class="attr">baggage:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># Ensure Baggage functionality is enabled</span></span><br><span class="line">      <span class="attr">remote-fields:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">book-id</span> <span class="comment"># 1. Remote propagation: Lets &#x27;book-id&#x27; propagate between microservices via HTTP headers</span></span><br><span class="line">      <span class="attr">tag-fields:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">book-id</span> <span class="comment"># 2. Auto-tagging: Micrometer automatically adds this Baggage value as a Tag to all subsequent Spans. This is key to seeing it in Grafana</span></span><br><span class="line">      <span class="attr">correlation:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># 3. Log correlation</span></span><br><span class="line">        <span class="attr">fields:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">book-id</span> <span class="comment"># 4. Also put &#x27;book-id&#x27; value into log MDC for easy viewing and searching in logs</span></span><br></pre></td></tr></table></figure>

<h4 id="Step-2-Set-Baggage-Value-in-Controller"><a href="#Step-2-Set-Baggage-Value-in-Controller" class="headerlink" title="Step 2: Set Baggage Value in Controller"></a>Step 2: Set Baggage Value in Controller</h4><p>After configuration, we need to inject <code>Tracer</code> at the program entry point (<code>BookController</code>) and put the incoming <code>id</code> into Baggage.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main/java/com/example/demo/interfaces/rest/BookController.java</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ... other imports ...</span></span><br><span class="line"><span class="keyword">import</span> io.micrometer.tracing.Baggage;</span><br><span class="line"><span class="keyword">import</span> io.micrometer.tracing.Tracer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> <span class="keyword">implements</span> <span class="title class_">BooksApi</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BookService bookService;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BookMapper bookMapper;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Tracer tracer; <span class="comment">// Spring Boot auto-configures Tracer</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ... other API methods ...</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;BookDto&gt; <span class="title function_">booksIdGet</span><span class="params">(Integer id)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        log.info(<span class="string">&quot;Getting book, ID: &#123;&#125;&quot;</span>, id);</span><br><span class="line">        <span class="comment">// Put ID into Baggage at the beginning of request processing</span></span><br><span class="line">        <span class="built_in">this</span>.setBookIdInBaggage(id);</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookService.getBookById(id);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(bookMapper.toDto(book));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ... other methods needing ID do the same ...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Set book ID into distributed tracing Baggage.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bookId The book ID to set</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setBookIdInBaggage</span><span class="params">(Integer bookId)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (bookId == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Get BaggageField handle using name &quot;book-id&quot; configured in application.yml</span></span><br><span class="line">            <span class="type">Baggage</span> <span class="variable">baggage</span> <span class="operator">=</span> tracer.getBaggage(<span class="string">&quot;book-id&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (baggage!= <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">// Set Baggage value, effective in current tracing context</span></span><br><span class="line">                baggage.makeCurrent(bookId.toString());</span><br><span class="line">                log.info(<span class="string">&quot;Baggage &#x27;book-id&#x27; set to: &#123;&#125;&quot;</span>, baggage.get());</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                log.warn(<span class="string">&quot;Baggage field &#x27;book-id&#x27; not configured or enabled.&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;Error setting book-id to Baggage&quot;</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Step-3-Verify-Results-in-Grafana-Tempo"><a href="#Step-3-Verify-Results-in-Grafana-Tempo" class="headerlink" title="Step 3: Verify Results in Grafana Tempo"></a>Step 3: Verify Results in Grafana Tempo</h4><p>After completing setup and sending a request (e.g., <code>GET /books/2</code>), we can see amazing results in Grafana Tempo. In the trace waterfall chart, click on any Span, and youâ€™ll clearly see the <code>book-id</code> tag we just set in the <code>Span Attributes</code> section below.</p>
<p><img src="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/tempo_query3.jpg" alt="Tempo Query with Baggage"></p>
<p>With this feature, when customer service reports â€œBook page with ID 2 loads slowlyâ€, operations staff no longer need to search blindly. They can directly query in Tempo using something like <code>&#123; resource.service.name=&quot;demo&quot;, book-id=&quot;2&quot; &#125;</code> to immediately filter all request chains related to this book, precisely locating the problem source.</p>
<h3 id="From-Technical-Monitoring-to-Business-Insights"><a href="#From-Technical-Monitoring-to-Business-Insights" class="headerlink" title="From Technical Monitoring to Business Insights"></a>From Technical Monitoring to Business Insights</h3><p>Through this business-semantic monitoring approach, our monitoring data is no longer just cold technical metrics but can provide valuable business insights.</p>
<p>For example, we can now directly answer these questions in monitoring systems like Grafana:</p>
<ul>
<li><strong>Analyze Customer Behavior</strong>:<br>- <code>getAllBooks</code> marked as <code>book.catalog.browse</code>, we can count â€œHow often do customers browse the product catalog?â€<br>- <code>getBookById</code> marked as <code>book.details.view</code>, we can analyze â€œHow many book details do customers view on average?â€</li>
<li><strong>Evaluate Inventory Management Efficiency</strong>:<br>- By filtering <code>operation</code> tags (<code>create</code>, <code>update</code>, <code>remove</code>), we can create dashboards showing â€œDaily new booksâ€, â€œUpdate frequencyâ€, and â€œProduct removalsâ€.</li>
<li><strong>Quantify Business Impact</strong>:<br>- We defined <code>business_impact</code> tags for different operations (like <code>high</code>, <code>medium</code>). Now we can set smarter alerts, e.g., â€œOnly send urgent alerts when operations with <code>business_impact</code> of <code>high</code> (like removing products) have error rates over 1%â€, letting teams focus on truly important issues.</li>
</ul>
<p>In summary, this use of <code>@Observed</code> makes monitoring data valuable for the entire team (including product, operations, and management).</p>
<hr>
<h2 id="ğŸ”¬-Modern-Observability-Part-2-Working-with-OpenTelemetry"><a href="#ğŸ”¬-Modern-Observability-Part-2-Working-with-OpenTelemetry" class="headerlink" title="ğŸ”¬ Modern Observability - Part 2: Working with OpenTelemetry"></a>ğŸ”¬ Modern Observability - Part 2: Working with OpenTelemetry</h2><p>Weâ€™ve learned to use <code>@Observed</code> to add observability to business logic. Now letâ€™s unveil the mystery and see how these technology packages work together to convert monitoring data to OpenTelemetry format and send it out.</p>
<h3 id="Overall-Architecture-Diagram"><a href="#Overall-Architecture-Diagram" class="headerlink" title="Overall Architecture Diagram"></a>Overall Architecture Diagram</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    subgraph &quot;Runtime Environment&quot;</span><br><span class="line">        User[ğŸ‘¨â€ğŸ’» User]</span><br><span class="line">        App</span><br><span class="line">        DB</span><br><span class="line">        Cache</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    subgraph &quot;Inside otel-lgtm&quot;</span><br><span class="line">        Developer[ğŸ‘¨â€ğŸ’» Developer]</span><br><span class="line">        Grafana[ğŸ“Š Grafana]</span><br><span class="line">        Tempo</span><br><span class="line">        Mimir[ğŸ“‰ Mimir - Metrics]</span><br><span class="line">        Loki[ğŸ“œ Loki - Logs]</span><br><span class="line">        Collector</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    User --&gt;|HTTP API Request| App</span><br><span class="line">    App --&gt;|JDBC| DB</span><br><span class="line">    App --&gt;|Redis Commands| Cache</span><br><span class="line">    App --&gt;|OTLP - gRPC/HTTP| Collector</span><br><span class="line">    Collector --&gt; Tempo</span><br><span class="line">    Collector --&gt; Mimir</span><br><span class="line">    Collector --&gt; Loki</span><br><span class="line">    Grafana --&gt;|Query| Tempo</span><br><span class="line">    Grafana --&gt;|Query| Mimir</span><br><span class="line">    Grafana --&gt;|Query| Loki</span><br><span class="line">    Developer --&gt;|Browse| Grafana</span><br></pre></td></tr></table></figure>

<h3 id="Layered-Architecture-Decoupling-and-Collaboration"><a href="#Layered-Architecture-Decoupling-and-Collaboration" class="headerlink" title="Layered Architecture: Decoupling and Collaboration"></a>Layered Architecture: Decoupling and Collaboration</h3><p>To understand these package relationships, the key is grasping Spring Boot 3â€™s observability layered architecture:</p>
<ol>
<li><strong>Instrumentation Layer</strong>: Where we developers interact, mainly using <code>@Observed</code></li>
<li><strong>Facade Layer</strong>: Provided by Micrometer. It defines a neutral, standard API</li>
<li><strong>Implementation Layer</strong>: Handled by OpenTelemetry. Itâ€™s the actual engine behind Micrometer API</li>
<li><strong>Export Layer</strong>: Composed of various Exporters, responsible for packaging monitoring data into OTLP format and sending to backend systems</li>
</ol>
<h3 id="Key-Package-Responsibilities-and-Data-Flow"><a href="#Key-Package-Responsibilities-and-Data-Flow" class="headerlink" title="Key Package Responsibilities and Data Flow"></a>Key Package Responsibilities and Data Flow</h3><p>The diagram below clearly shows how metrics, traces, and logs are processed through different paths when a method with <code>@Observed</code> is called.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    subgraph APP[&quot;Inside Application&quot;]</span><br><span class="line">        A[&quot;Business Method&lt;br/&gt;executes log.info&quot;] --&gt;|&quot;@Observed&quot;| B[&quot;Micrometer Observation&lt;br/&gt;Unified Facade API&quot;]</span><br><span class="line"></span><br><span class="line">        subgraph TRACES[&quot;Trace Data Flow&quot;]</span><br><span class="line">            B -.-&gt;|&quot;Create Span&quot;| C_T[&quot;micrometer-tracing&lt;br/&gt;Core Tracing API&quot;]</span><br><span class="line">            C_T --&gt; D_T[&quot;micrometer-tracing-bridge-otel&lt;br/&gt;Bridge to OTel&quot;]</span><br><span class="line">            D_T --&gt; F_T[&quot;OpenTelemetry SDK&lt;br/&gt;Telemetry Data Processing Core&quot;]</span><br><span class="line">        end</span><br><span class="line"></span><br><span class="line">        subgraph LOGS[&quot;Log Data Flow&quot;]</span><br><span class="line">            F_T -.-&gt;|&quot;TraceId &amp; SpanId inject to MDC&quot;| H_L[&quot;Logging Framework&lt;br/&gt;SLF4J + Logback + MDC&quot;]</span><br><span class="line">            A --&gt;|&quot;log.info writes log&quot;| H_L</span><br><span class="line">            H_L --&gt;|&quot;Logback Appender intercepts&quot;| I_L[&quot;opentelemetry-spring-boot-starter&lt;br/&gt;includes Logback integration&quot;]</span><br><span class="line">            I_L --&gt;|&quot;Convert to OTLP LogRecord&quot;| F_T</span><br><span class="line">        end</span><br><span class="line"></span><br><span class="line">        subgraph METRICS[&quot;Metrics Data Flow&quot;]</span><br><span class="line">            B -.-&gt;|&quot;Auto-generate timers &amp; counters&quot;| C_M[&quot;micrometer-core&lt;br/&gt;Metrics Collection Core&quot;]</span><br><span class="line">            C_M --&gt; D_M1[&quot;micrometer-registry-otlp&lt;br/&gt;Metrics OTLP Exporter&quot;]</span><br><span class="line">            C_M --&gt; D_M2[&quot;micrometer-registry-prometheus&lt;br/&gt;Prometheus Endpoint Export&quot;]</span><br><span class="line">        end</span><br><span class="line"></span><br><span class="line">        subgraph EXPORT[&quot;Data Export Layer&quot;]</span><br><span class="line">            F_T --&gt; G_T[&quot;opentelemetry-exporter-otlp&lt;br/&gt;Unified OTLP Exporter&quot;]</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    subgraph BACKEND[&quot;External Monitoring Backend&quot;]</span><br><span class="line">        L[&quot;Grafana LGTM Stack&lt;br/&gt;Loki + Grafana + Tempo + Mimir&quot;]</span><br><span class="line">        P[&quot;Prometheus&lt;br/&gt;Optional Pull Mode&quot;]</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    G_T --&gt;|&quot;Traces &amp; Logs via OTLP&quot;| L</span><br><span class="line">    D_M1 --&gt;|&quot;Metrics via OTLP&quot;| L</span><br><span class="line">    D_M2 -.-&gt;|&quot;Prometheus Pull&quot;| P</span><br><span class="line">    P -.-&gt;|&quot;Federation or Remote Read&quot;| L</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>Package (Dependency)</th>
<th align="left">Purpose</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>spring-boot-starter-actuator</code></strong></td>
<td align="left">Framework Foundation</td>
<td align="left">Cornerstone of observability. It brings in Micrometer and provides <code>/actuator</code> endpoints.</td>
</tr>
<tr>
<td><strong><code>spring-boot-starter-aop</code></strong></td>
<td align="left">Powers <code>@Observed</code></td>
<td align="left">Provides AOP technology that lets <code>@Observed</code> annotation be intercepted and automatically add monitoring logic.</td>
</tr>
<tr>
<td><strong><code>io.micrometer:micrometer-tracing-bridge-otel</code></strong></td>
<td align="left">API Bridge</td>
<td align="left">Acts as translator, converting Micrometer tracing commands into OpenTelemetry-understandable commands.</td>
</tr>
<tr>
<td><strong><code>io.opentelemetry.instrumentation:opentelemetry-spring-boot-starter</code></strong></td>
<td align="left">Auto-configuration Package</td>
<td align="left">Greatly simplifies integration, automatically completes OpenTelemetry initialization and setup behind the scenes.</td>
</tr>
<tr>
<td><strong><code>io.opentelemetry:opentelemetry-exporter-otlp</code></strong></td>
<td align="left">Trace &amp; Log Exporter</td>
<td align="left">Responsible for packaging generated traces and logs into OTLP format and sending over network.</td>
</tr>
<tr>
<td><strong><code>micrometer-registry-otlp</code></strong></td>
<td align="left">Metrics Exporter</td>
<td align="left">Clear responsibility: converts Micrometer-collected metrics to OTLP format and pushes to backend.</td>
</tr>
<tr>
<td><strong><code>micrometer-registry-prometheus</code></strong></td>
<td align="left">Metrics Local Endpoint</td>
<td align="left">Provides another way to view metrics. It opens an HTTP endpoint at <code>/actuator/prometheus</code>, convenient for direct metric viewing during development and debugging.</td>
</tr>
</tbody></table>
<p>Simply put, our application monitors through unified Micrometer API (<code>@Observed</code>), implemented by OpenTelemetry behind the scenes, with specialized exporters sending data in OTLP format to the backend. All this complex assembly work is automated by Spring Boot, creating a clear, maintainable observability system.</p>
<h3 id="Runtime-View"><a href="#Runtime-View" class="headerlink" title="Runtime View"></a>Runtime View</h3><h4 id="Journey-of-an-API-Request"><a href="#Journey-of-an-API-Request" class="headerlink" title="Journey of an API Request"></a>Journey of an API Request</h4><p>Letâ€™s see what happens internally when an â€œadd bookâ€ request (<code>POST /books</code>) comes in.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant Client as ğŸ‘¨â€ğŸ’» API Client</span><br><span class="line">    participant App as ğŸš€ Demo Application</span><br><span class="line">    participant SVC as ğŸ“– BookService</span><br><span class="line">    participant DB as ğŸ˜ PostgreSQL</span><br><span class="line">    participant Cache as âš¡ Redis</span><br><span class="line">    participant LGTM as ğŸ“ˆ otel-lgtm</span><br><span class="line"></span><br><span class="line">    Client -&gt;&gt; App: POST /books (Request)</span><br><span class="line">    Note over App: Spring MVC receives request, auto-generates a Trace</span><br><span class="line"></span><br><span class="line">    App -&gt;&gt; SVC: createBook(book)</span><br><span class="line">    Note over SVC: @Observed annotation takes effect, creates new Span</span><br><span class="line"></span><br><span class="line">    SVC -&gt;&gt; DB: Check if ISBN exists</span><br><span class="line">    SVC -&gt;&gt; DB: Save new book</span><br><span class="line">    Note over SVC,DB: JPA automatically generates Spans for database operations</span><br><span class="line"></span><br><span class="line">    SVC -&gt;&gt; Cache: @CacheEvict clears cache</span><br><span class="line">    Note over Cache: Redis operations also auto-generate Spans</span><br><span class="line"></span><br><span class="line">    SVC --&gt;&gt; App: Return created book</span><br><span class="line">    App --&gt;&gt; Client: 201 Created (Response)</span><br><span class="line"></span><br><span class="line">    Note over App,LGTM: Throughout the process,&lt;br/&gt;application continuously sends Logs, Traces, Metrics&lt;br/&gt;to otel-lgtm monitoring backend via OTLP format</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ”¬-Modern-Observability-Part-3-Exploring-Telemetry-Data-in-Grafana"><a href="#ğŸ”¬-Modern-Observability-Part-3-Exploring-Telemetry-Data-in-Grafana" class="headerlink" title="ğŸ”¬ Modern Observability - Part 3: Exploring Telemetry Data in Grafana"></a>ğŸ”¬ Modern Observability - Part 3: Exploring Telemetry Data in Grafana</h2><p>Now comes the most exciting part: actually seeing the telemetry data weâ€™ve worked hard to collect. Open your browser and visit <code>http://localhost:3000</code> to enter Grafanaâ€™s dashboard.</p>
<h3 id="Grafana-Navigation-and-Data-Sources"><a href="#Grafana-Navigation-and-Data-Sources" class="headerlink" title="Grafana Navigation and Data Sources"></a>Grafana Navigation and Data Sources</h3><p>In Grafanaâ€™s left navigation bar, click â€œExploreâ€ (compass icon). In the dropdown menu at the top of the page, youâ€™ll see that the <code>otel-lgtm</code> Docker image has pre-configured three core data sources for us, corresponding to the three pillars of observability:</p>
<ul>
<li><strong><code>mimir</code></strong>: For querying <strong>Metrics</strong></li>
<li><strong><code>loki</code></strong>: For querying <strong>Logs</strong></li>
<li><strong><code>tempo</code></strong>: For querying <strong>Traces</strong></li>
</ul>
<h3 id="The-Art-of-Tracing-Using-Tempo-and-TraceQL"><a href="#The-Art-of-Tracing-Using-Tempo-and-TraceQL" class="headerlink" title="The Art of Tracing: Using Tempo and TraceQL"></a>The Art of Tracing: Using Tempo and TraceQL</h3><p>On Grafanaâ€™s Explore page, select the <code>tempo</code> data source. We can use TraceQL language to query traces.</p>
<ol>
<li><p><strong>Query by Service Name</strong>:<br> In <code>application.yml</code>, we defined <code>spring.application.name: demo</code>. This name becomes <code>service.name</code> in OpenTelemetry. Therefore, the most common query is filtering all traces from our application.</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;resource.service.name=&quot;demo&quot;&#125;</span><br></pre></td></tr></table></figure>

<p> <img src="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/tempo_query1.jpg" alt="Tempo Query by Service Name"></p>
</li>
<li><p><strong>Query by Custom Span Name</strong>:<br> We used <code>@Observed(contextualName = &quot;View Book Details&quot;)</code> in <code>BookService</code> to give methods meaningful names. This name becomes the Span name, letting us precisely find traces of specific business logic.</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;name=&quot;View Book Details&quot;&#125;</span><br></pre></td></tr></table></figure>

<p> <img src="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/tempo_query2.jpg" alt="Tempo Query by Span Name"></p>
</li>
<li><p><strong>Analyze Trace View (Waterfall View)</strong>:<br> Click any query result to see a waterfall chart.</p>
<ul>
<li><strong>Cache Miss</strong>: When you first query a bookâ€™s details, youâ€™ll see a hierarchical structure: top level is <code>GET /books/&#123;id&#125;</code>, below is <code>View Book Details</code>, and further below are <code>SELECT</code> database query Spans. Each Spanâ€™s duration is clearly visible.</li>
<li><strong>Cache Hit</strong>: When you query the same book again, the <code>SELECT</code> Span disappears and total trace duration significantly shortens. This directly proves cache effectiveness.</li>
</ul>
</li>
</ol>
<h3 id="The-Power-of-Metrics-Using-Mimir-and-PromQL"><a href="#The-Power-of-Metrics-Using-Mimir-and-PromQL" class="headerlink" title="The Power of Metrics: Using Mimir and PromQL"></a>The Power of Metrics: Using Mimir and PromQL</h3><p>In the new version, although the underlying metric storage technology is Mimir, it provides a fully Prometheus-compatible query endpoint. Therefore, the data source is directly named <code>prometheus</code>, letting users focus on using standard PromQL (Prometheus Query Language) for queries - the most widely used metric query language in the industry.</p>
<h4 id="OTLP-to-Prometheus-Name-Conversion"><a href="#OTLP-to-Prometheus-Name-Conversion" class="headerlink" title="OTLP to Prometheus Name Conversion"></a>OTLP to Prometheus Name Conversion</h4><p>Understanding a key conversion rule is crucial: Micrometer-generated metric names are converted when exported to Mimir&#x2F;Prometheus via OTLP.</p>
<ul>
<li>Dots <code>.</code> in metric names are converted to underscores <code>_</code></li>
<li>The <code>service.name</code> (<code>demo</code>) resource attribute is mapped to the <code>job</code> label</li>
<li>Timers (<code>@Observed</code> or HTTP requests) automatically generate metrics in <code>_milliseconds</code> units with suffixes like <code>_count</code>, <code>_sum</code>, <code>_bucket</code> (histogram buckets). This is because newer Micrometer versions default to milliseconds for higher precision.</li>
</ul>
<table>
<thead>
<tr>
<th align="left">Original Name (<code>@Observed</code> name)</th>
<th align="left">Converted PromQL Metric (example)</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>book.details.view</code></td>
<td align="left"><code>book_details_view_milliseconds_count</code>, <code>book_details_view_milliseconds_sum</code></td>
</tr>
<tr>
<td align="left">HTTP Server Requests</td>
<td align="left"><code>http_server_requests_milliseconds_count</code></td>
</tr>
</tbody></table>
<h4 id="Useful-PromQL-Queries"><a href="#Useful-PromQL-Queries" class="headerlink" title="Useful PromQL Queries"></a>Useful PromQL Queries</h4><ol>
<li><p><strong>Query API Requests Per Second (RPS)</strong>:</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rate(http_server_requests_milliseconds_count&#123;job=&quot;demo&quot;&#125;[5m])</span><br></pre></td></tr></table></figure>

<p> This query calculates the average requests per second for the <code>demo</code> service over the past 5-minute window.</p>
<p> <img src="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/prometheus_query1.jpg" alt="Prometheus Query RPS"></p>
</li>
<li><p><strong>Query â€œView Book Detailsâ€ P95 Latency (in milliseconds)</strong>:</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">histogram_quantile(0.95, sum(rate(book_details_view_milliseconds_bucket&#123;job=&quot;demo&quot;&#125;[5m])) by (le))</span><br></pre></td></tr></table></figure>

<p> This is an advanced query using histogram (<code>_bucket</code>) data to calculate the 95th percentile latency for â€œView Book Detailsâ€ operations in milliseconds.</p>
</li>
<li><p><strong>Analyze with Custom Tags</strong>:<br> We defined <code>lowCardinalityKeyValues</code> in <code>@Observed</code>, like <code>operation=&quot;get_by_id&quot;</code>. This tag enables more detailed analysis.</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Calculate total count of all &quot;get_by_id&quot; operations in the past 5 minutes</span><br><span class="line">sum(increase(book_details_view_milliseconds_count&#123;job=&quot;demo&quot;, operation=&quot;get_by_id&quot;&#125;[5m]))</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="The-Magic-of-Exemplars"><a href="#The-Magic-of-Exemplars" class="headerlink" title="The Magic of Exemplars"></a>The Magic of Exemplars</h4><p>In Grafanaâ€™s chart panels, if you see a colored diamond icon next to a data point, thatâ€™s an <strong>Exemplar</strong>. Itâ€™s a <strong>specific trace sample</strong> associated with that time pointâ€™s metric data. When you see a spike in the latency chart, you can click the diamond icon on that spike, and Grafana will immediately take you to <strong>the complete trace view of the request that caused this latency spike</strong>. This feature dramatically shortens the path from â€œfinding problemsâ€ to â€œlocating problemsâ€.</p>
<h3 id="Log-Correlation-Using-Loki-and-LogQL"><a href="#Log-Correlation-Using-Loki-and-LogQL" class="headerlink" title="Log Correlation: Using Loki and LogQL"></a>Log Correlation: Using Loki and LogQL</h3><p>Finally, select the <code>loki</code> data source. We use LogQL to query logs.</p>
<p>To enable logs to be successfully collected and parsed by the backend <code>otel-lgtm</code>, you need to <strong>enable Spring Bootâ€™s file logging and set its format to <code>logstash</code> JSON</strong>. This ensures all file-written logs have the structured format that Loki loves. You can achieve this by adding configuration like this in <code>application.yml</code>:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">structured:</span></span><br><span class="line">    <span class="attr">format:</span></span><br><span class="line">      <span class="attr">file:</span> <span class="string">logstash</span>     <span class="comment"># Set file log format to logstash (JSON)</span></span><br></pre></td></tr></table></figure>

<p>After configuration, thanks to OpenTelemetryâ€™s automatic integration, key tracing information like <code>trace_id</code> and <code>span_id</code> is automatically added to JSON logs, making log-trace correlation incredibly powerful.</p>
<ol>
<li><p><strong>Query All Application Logs</strong>:<br> The <code>spring.application.name</code> defined in <code>application.yml</code> is automatically mapped to the <code>service_name</code> label in Loki. This is the most direct way to filter specific application logs.</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;service_name=&quot;demo&quot;&#125;</span><br></pre></td></tr></table></figure>

<p> <img src="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/loki_query1.jpg" alt="Loki Query"></p>
</li>
<li><p><strong>Trace to Logs</strong>:<br> This is the most commonly used feature. Since <code>trace_id</code> is already included in our JSON logs, the log agent in <code>otel-lgtm</code> intelligently extracts it as an indexable label. Therefore, in Tempoâ€™s trace waterfall chart, click any Span, then click the â€œLogs for this spanâ€ button, and Grafana can still precisely filter all related logs.</p>
</li>
<li><p><strong>Manually Query Logs by Trace ID</strong>:<br> You can also copy a <code>trace_id</code> from Tempo and directly use this label to query in Loki, which is more efficient than parsing full text.</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;service_name=&quot;demo&quot;, trace_id=&quot;copied_trace_id&quot;&#125;</span><br></pre></td></tr></table></figure>

<p> If you want to further process log JSON content (e.g., only show the <code>message</code> field), you can add <code>json</code> and <code>line_format</code> filters:</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;service_name=&quot;demo&quot;, trace_id=&quot;copied_trace_id&quot;&#125; | json | line_format &quot;&#123;&#123;.message&#125;&#125;&quot;</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h2 id="ğŸ”¬-Modern-Observability-Part-4-Full-Stack-Tracing-with-Grafana-Faro-Integration-Optional"><a href="#ğŸ”¬-Modern-Observability-Part-4-Full-Stack-Tracing-with-Grafana-Faro-Integration-Optional" class="headerlink" title="ğŸ”¬ Modern Observability - Part 4: Full-Stack Tracing with Grafana Faro Integration (Optional)"></a>ğŸ”¬ Modern Observability - Part 4: Full-Stack Tracing with Grafana Faro Integration (Optional)</h2><p>In modern web applications, monitoring only backend services isnâ€™t enough. Complete observability needs to cover the full chain from user browser to backend database. This project demonstrates how to use <strong>Grafana Faro</strong> for frontend observability and seamlessly integrate with backend OpenTelemetry tracing.</p>
<h3 id="Grafana-Faro-Integration-Implementation"><a href="#Grafana-Faro-Integration-Implementation" class="headerlink" title="Grafana Faro Integration Implementation"></a>Grafana Faro Integration Implementation</h3><h4 id="Frontend-Tracing-Configuration-src-main-resources-static-index-html"><a href="#Frontend-Tracing-Configuration-src-main-resources-static-index-html" class="headerlink" title="Frontend Tracing Configuration (src/main/resources/static/index.html)"></a>Frontend Tracing Configuration (<code>src/main/resources/static/index.html</code>)</h4><p>Weâ€™ve integrated Grafana Faro in the frontend page for complete frontend observability:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Load Grafana Faro CDN packages --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/@grafana/faro-web-sdk@^1/dist/bundle/faro-web-sdk.iife.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/@grafana/faro-web-tracing@^1/dist/bundle/faro-web-tracing.iife.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/@grafana/faro-transport-otlp-http@^1/dist/bundle/faro-transport-otlp-http.iife.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; initializeFaro, getWebInstrumentations &#125; = <span class="variable language_">window</span>.<span class="property">GrafanaFaroWebSdk</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; <span class="title class_">TracingInstrumentation</span> &#125; = <span class="variable language_">window</span>.<span class="property">GrafanaFaroWebTracing</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; <span class="title class_">OtlpHttpTransport</span> &#125; = <span class="variable language_">window</span>.<span class="property">GrafanaFaroTransportOtlpHttp</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> faro = <span class="title function_">initializeFaro</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// Application identification</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">app</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;my-app-frontend&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">version</span>: <span class="string">&#x27;1.0.0&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">environment</span>: <span class="string">&#x27;development&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// Explicitly set OpenTelemetry resource attributes</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">otelResourceAttributes</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;service.name&#x27;</span>: <span class="string">&#x27;my-app-frontend&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;service.version&#x27;</span>: <span class="string">&#x27;1.0.0&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;deployment.environment&#x27;</span>: <span class="string">&#x27;development&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// Auto-instrumentation configuration</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">instrumentations</span>: [</span></span><br><span class="line"><span class="language-javascript">            ...<span class="title function_">getWebInstrumentations</span>(),      <span class="comment">// Basic Web instrumentations</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">new</span> <span class="title class_">TracingInstrumentation</span>()      <span class="comment">// Tracing instrumentation (auto-injects traceparent to fetch)</span></span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// OTLP transport configuration</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">transports</span>: [</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">new</span> <span class="title class_">OtlpHttpTransport</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">tracesURL</span>: <span class="string">&#x27;http://localhost:4318/v1/traces&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">logsURL</span>: <span class="string">&#x27;http://localhost:4318/v1/logs&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">bufferSize</span>: <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">concurrency</span>: <span class="number">5</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">debug</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// Test sending initial event</span></span></span><br><span class="line"><span class="language-javascript">    faro.<span class="property">api</span>.<span class="title function_">pushEvent</span>(<span class="string">&#x27;page_loaded&#x27;</span>, &#123; <span class="attr">timestamp</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>() &#125;);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Automatic-Frontend-Backend-Trace-Correlation"><a href="#Automatic-Frontend-Backend-Trace-Correlation" class="headerlink" title="Automatic Frontend-Backend Trace Correlation"></a>Automatic Frontend-Backend Trace Correlation</h4><p>When a user clicks the â€œGet Booksâ€ button, Faroâ€™s <code>TracingInstrumentation</code> automatically:</p>
<ol>
<li><strong>Creates Frontend Span</strong>: Records user action and API request</li>
<li><strong>Injects traceparent Header</strong>: Automatically adds tracing context to <code>fetch(&#39;/books&#39;)</code> request</li>
<li><strong>Correlates Backend Trace</strong>: Spring Boot receives the traceparent header and creates correlated backend Span</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Actual event handling logic</span></span><br><span class="line">getBooksButton.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Manually send custom event</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">faro</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">faro</span>.<span class="property">api</span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">faro</span>.<span class="property">api</span>.<span class="title function_">pushEvent</span>(<span class="string">&#x27;button_clicked&#x27;</span>, &#123; <span class="attr">action</span>: <span class="string">&#x27;get_books&#x27;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Fetch API is automatically traced by TracingInstrumentation</span></span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&#x27;/books&#x27;</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// Handle response...</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">faro</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">faro</span>.<span class="property">api</span>) &#123;</span><br><span class="line">              <span class="variable language_">window</span>.<span class="property">faro</span>.<span class="property">api</span>.<span class="title function_">pushEvent</span>(<span class="string">&#x27;books_fetched&#x27;</span>, &#123; <span class="attr">count</span>: data.<span class="property">length</span> &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// Automatic error tracking</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">faro</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">faro</span>.<span class="property">api</span>) &#123;</span><br><span class="line">              <span class="variable language_">window</span>.<span class="property">faro</span>.<span class="property">api</span>.<span class="title function_">pushError</span>(error);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Full-Stack-Trace-Effect-in-Tempo"><a href="#Full-Stack-Trace-Effect-in-Tempo" class="headerlink" title="Full-Stack Trace Effect in Tempo"></a>Full-Stack Trace Effect in Tempo</h3><p>After integrating Grafana Faro, you can see complete frontend-backend trace chains in Tempo:</p>
<p><img src="https://raw.githubusercontent.com/samzhu/demo-springboot-250613/refs/heads/main/dev-resources/images/tempo_query4.jpg" alt="Full-Stack Tracing"></p>
<p>As shown, you can now query in Tempo:</p>
<ul>
<li><strong>Frontend Service</strong> (<code>my-app-frontend</code>): User interactions, page loads, API requests</li>
<li><strong>Backend Service</strong> (<code>demo</code>): API processing, business logic, database operations</li>
<li><strong>Complete Chain</strong>: End-to-end tracing from user click to database query</li>
</ul>
<h3 id="Useful-Full-Stack-Trace-Queries"><a href="#Useful-Full-Stack-Trace-Queries" class="headerlink" title="Useful Full-Stack Trace Queries"></a>Useful Full-Stack Trace Queries</h3><h4 id="1-Query-Frontend-Traces"><a href="#1-Query-Frontend-Traces" class="headerlink" title="1. Query Frontend Traces"></a>1. Query Frontend Traces</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;resource.service.name=&quot;my-app-frontend&quot;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-Query-Backend-Traces"><a href="#2-Query-Backend-Traces" class="headerlink" title="2. Query Backend Traces"></a>2. Query Backend Traces</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;resource.service.name=&quot;demo&quot;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-Query-Complete-Frontend-Backend-Chains"><a href="#3-Query-Complete-Frontend-Backend-Chains" class="headerlink" title="3. Query Complete Frontend-Backend Chains"></a>3. Query Complete Frontend-Backend Chains</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;resource.service.name=&quot;my-app-frontend&quot; || resource.service.name=&quot;demo&quot;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-Analyze-Cross-Service-Performance"><a href="#4-Analyze-Cross-Service-Performance" class="headerlink" title="4. Analyze Cross-Service Performance"></a>4. Analyze Cross-Service Performance</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;(resource.service.name=&quot;my-app-frontend&quot; || resource.service.name=&quot;demo&quot;) &amp;&amp; duration&gt;1s&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-Trace-Specific-Business-Operations"><a href="#5-Trace-Specific-Business-Operations" class="headerlink" title="5. Trace Specific Business Operations"></a>5. Trace Specific Business Operations</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;resource.service.name=&quot;demo&quot; &amp;&amp; name=&quot;View Book Details&quot;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Faro-Integration-Advantages"><a href="#Faro-Integration-Advantages" class="headerlink" title="Faro Integration Advantages"></a>Faro Integration Advantages</h3><ol>
<li><strong>Zero-Config Auto-Correlation</strong>: Frontend and backend traces automatically correlate via <code>traceparent</code> header</li>
<li><strong>Complete User Experience</strong>: Full view from browser click to database query</li>
<li><strong>Unified Monitoring Platform</strong>: Frontend and backend data converge to the same Grafana&#x2F;Tempo platform</li>
<li><strong>Rich Context</strong>: Complete context combining frontend user behavior and backend business logic</li>
</ol>
<h3 id="Real-World-Application-Scenarios"><a href="#Real-World-Application-Scenarios" class="headerlink" title="Real-World Application Scenarios"></a>Real-World Application Scenarios</h3><ul>
<li><strong>User Experience Analysis</strong>: Analyze complete timeline from user click to page update</li>
<li><strong>Performance Bottleneck Location</strong>: Quickly determine if slow requests are frontend or backend issues</li>
<li><strong>Error Root Cause Analysis</strong>: Trace complete error propagation chain from frontend to backend</li>
<li><strong>Business Process Monitoring</strong>: Monitor critical business process execution across frontend and backend</li>
</ul>
<p>Through Grafana Faro integration, we achieve true full-stack observability, providing a complete monitoring solution for modern web applications.</p>
<hr>
<h2 id="Environment-and-Configuration"><a href="#Environment-and-Configuration" class="headerlink" title="Environment and Configuration"></a>Environment and Configuration</h2><h3 id="Containerized-Environment-compose-yaml"><a href="#Containerized-Environment-compose-yaml" class="headerlink" title="Containerized Environment (compose.yaml)"></a>Containerized Environment (<code>compose.yaml</code>)</h3><p>We use Docker Compose to start all required external services with one click, including <code>postgres</code> (database), <code>redis</code> (cache), and <code>otel-lgtm</code> (monitoring backend). This lets any developer quickly set up a complete development and testing environment on their machine.</p>
<h3 id="Application-Configuration-application-yml"><a href="#Application-Configuration-application-yml" class="headerlink" title="Application Configuration (application.yml)"></a>Application Configuration (<code>application.yml</code>)</h3><p>This is the projectâ€™s control center, defining various application behaviors. By now, you should better understand how each setting corresponds to the technologies discussed in previous sections:</p>
<ul>
<li><strong><code>spring.application.name: demo</code></strong>: Very important. This name becomes <code>service.name</code> in OpenTelemetry, your basis for filtering services in Grafana.</li>
<li><strong><code>spring.threads.virtual.enabled: true</code></strong>: Enable Java 21 virtual threads for improved throughput. See ğŸš€ Performance Boost section.</li>
<li><strong><code>management.observations.annotations.enabled: true</code></strong>: Master switch for <code>@Observed</code> annotations. See ğŸ”¬ Observability section.</li>
<li><strong><code>management.opentelemetry.resource-attributes</code></strong>: Adds extra tags to all outgoing monitoring data, like service version and deployment environment, for easier backend filtering.</li>
<li><strong><code>management.tracing.sampling.probability: 1.0</code></strong>: Sampling rate set to <code>1.0</code> (100%). Useful for development and testing to ensure every request trace is recorded. In production, usually set lower (e.g., <code>0.1</code>) for performance and cost considerations.</li>
<li><strong><code>management.otlp.*.endpoint</code></strong>: Explicitly specifies where to send Metrics, Traces, and Logs. Here we point to <code>otel-lgtm</code> containerâ€™s port 4318.</li>
<li><strong><code>spring.jpa.hibernate.ddl-auto</code></strong> (not set to <code>update</code> or <code>create</code>): We give database structure management completely to Liquibase for rigorous version control.</li>
</ul>
<hr>
<h2 id="Monitoring"><a href="#Monitoring" class="headerlink" title="Monitoring"></a>Monitoring</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET http://localhost:8080/actuator/health</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;UP&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;groups&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;liveness&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;readiness&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Readiness Probe</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET http://localhost:8080/actuator/health/readiness</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;UP&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Liveness Probe</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET http://localhost:8080/actuator/health/liveness</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;UP&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>SBOM Information</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET http://localhost:8080/actuator/sbom/application</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;bomFormat&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CycloneDX&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;specVersion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;serialNumber&quot;</span><span class="punctuation">:</span> <span class="string">&quot;urn:uuid:9993dfa5-8a64-4d53-a404-c1a56a0be1cb&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-06-17T06:58:29Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;tools&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;components&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;application&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CycloneDX&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cyclonedx-gradle-plugin&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.3.0&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;services&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;component&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;application&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;bom-ref&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkg:maven/com.example/demo@0.0.1?project_path=%3A&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.example&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;demo&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;purl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkg:maven/com.example/demo@0.0.1?project_path=%3A&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;modified&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;externalReferences&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;licenses&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;components&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;library&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;bom-ref&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkg:maven/org.springframework.boot/spring-boot@3.5.0?type=jar&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;publisher&quot;</span><span class="punctuation">:</span> <span class="string">&quot;VMware, Inc.&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.springframework.boot&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;spring-boot&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3.5.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Spring Boot&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;hashes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;alg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MD5&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bda13182d51c044ec0ce7c4c62a2cc68&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;licenses&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Apache-2.0&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;purl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkg:maven/org.springframework.boot/spring-boot@3.5.0?type=jar&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;modified&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;externalReferences&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;website&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://spring.io&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cdx:maven:package:test&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;false&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;library&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;bom-ref&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkg:maven/org.springframework.data/spring-data-commons@3.5.0?type=jar&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.springframework.data&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;spring-data-commons&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3.5.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Core Spring concepts underpinning every Spring Data module.&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;hashes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;alg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MD5&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;a753695738fbd37e798a738072592550&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;licenses&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Apache-2.0&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;purl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkg:maven/org.springframework.data/spring-data-commons@3.5.0?type=jar&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;modified&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;externalReferences&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;issue-tracker&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://github.com/spring-projects/spring-data-commons/issues&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cdx:maven:package:test&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;false&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Git Information</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET http://localhost:8080/actuator/info</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;git&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;branch&quot;</span><span class="punctuation">:</span> <span class="string">&quot;main&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;commit&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;66fb93d&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;time&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-06-19T02:27:31Z&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="VS-Code-Extension-Recommendations"><a href="#VS-Code-Extension-Recommendations" class="headerlink" title="VS Code Extension Recommendations"></a>VS Code Extension Recommendations</h3><ul>
<li><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack">vscjava.vscode-java-pack</a></li>
<li><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=vmware.vscode-boot-dev-pack">vmware.vscode-boot-dev-pack</a></li>
<li>Docker</li>
</ul>
<h2 id="ğŸ“‹-Best-Practices-Checklist"><a href="#ğŸ“‹-Best-Practices-Checklist" class="headerlink" title="ğŸ“‹ Best Practices Checklist"></a>ğŸ“‹ Best Practices Checklist</h2><h3 id="Development-Phase"><a href="#Development-Phase" class="headerlink" title="Development Phase"></a>Development Phase</h3><ul>
<li><input disabled="" type="checkbox"> Run <code>./gradlew clean openApiGenerate</code> after modifying <code>openapi.yaml</code></li>
<li><input disabled="" type="checkbox"> Set appropriate TTL when adding cache</li>
<li><input disabled="" type="checkbox"> Add <code>@Observed</code> annotation to important business logic</li>
</ul>
<h3 id="Deployment-Phase"><a href="#Deployment-Phase" class="headerlink" title="Deployment Phase"></a>Deployment Phase</h3><ul>
<li><input disabled="" type="checkbox"> Use different configuration files for different environments</li>
<li><input disabled="" type="checkbox"> Use environment variables or Secret Manager for sensitive information</li>
<li><input disabled="" type="checkbox"> Set appropriate trace sampling rate (0.1 recommended for production)</li>
</ul>
<h2 id="ğŸ“š-Further-Learning-Resources"><a href="#ğŸ“š-Further-Learning-Resources" class="headerlink" title="ğŸ“š Further Learning Resources"></a>ğŸ“š Further Learning Resources</h2><h3 id="Official-Documentation"><a href="#Official-Documentation" class="headerlink" title="Official Documentation"></a>Official Documentation</h3><ul>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/">Spring Boot Official Documentation</a></li>
<li><a target="_blank" rel="noopener" href="https://opentelemetry.io/docs/">OpenTelemetry Documentation</a></li>
<li><a target="_blank" rel="noopener" href="https://grafana.com/docs/">Grafana Documentation</a></li>
</ul>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>This guide demonstrates how to integrate a series of modern tools and practices to build a Spring Boot project thatâ€™s not just feature-complete but also considers performance, maintainability, and observability.</p>
<p>For developers, evolving from â€œgetting features doneâ€ to â€œdoing quality workâ€ requires consciously adopting these modern practices:</p>
<ul>
<li>Embrace Java 21 virtual threads for simpler code and higher system throughput</li>
<li>Use Liquibase for database version control to ensure team collaboration and multi-environment deployment consistency</li>
<li>Practice API-First development workflow to establish clear service contracts and accelerate team parallel development</li>
<li>Leverage tools like MapStruct and Spring Cache to eliminate repetitive boilerplate code and effectively improve application performance</li>
<li>Build comprehensive observability system through Micrometer and OpenTelemetry to deeply understand system internal behavior, transforming passive â€œdebuggingâ€ into proactive â€œperformance optimizationâ€ and â€œproblem preventionâ€</li>
</ul>
<p><strong>Remember: Good programs donâ€™t just run - they run stably, run fast, and problems can be quickly located when they occur!</strong></p>
<p>Incorporating these practices into daily development helps improve final product quality and development team productivity. Hope this guide provides useful reference for your next project.</p>
<hr>
<p><em>The complete source code is available at <a target="_blank" rel="noopener" href="https://github.com/samzhu/demo-springboot-250613">github.com&#x2F;samzhu&#x2F;demo-springboot-250613</a>. If this guide helped you, feel free to share with other developers. Questions or suggestions? Welcome to raise Issues or Pull Requests!</em> ğŸ™Œ</p>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>Post author:  </strong>Sam Zhu
  </li>
  <li class="post-copyright-link">
      <strong>Post link: </strong>
      <a href="https://blog.samzhu.dev/2025/07/24/A-Developer-s-Guide-to-Spring-Boot-3-Exploring-Modern-Practices/" title="A Developer&#39;s Guide to Spring Boot 3 - Exploring Modern Practices">https://blog.samzhu.dev/2025/07/24/A-Developer-s-Guide-to-Spring-Boot-3-Exploring-Modern-Practices/</a>
  </li>
  <li class="post-copyright-license">
      <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/en" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/SpringBoot/" rel="tag"># SpringBoot</a>
              <a href="/tags/Observability/" rel="tag"># Observability</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/03/25/Building-a-Complete-Grafana-LGTM-Observability-Platform-with-Docker-Compose/" rel="prev" title="Building a Complete Grafana LGTM Observability Platform with Docker Compose">
                  <i class="fa fa-angle-left"></i> Building a Complete Grafana LGTM Observability Platform with Docker Compose
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Sam Zhu</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/samzhu" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.3.0/mermaid.min.js","integrity":"sha256-9y71g5Lz/KLsHjB8uXwnkuWDtAMDSzD/HdIbqhJfTAI="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>





  





</body>
</html>
