---
title: 建立 GitLab
tags:
  - GitLab
categories:
  - DevOps
date: 2019-05-01 12:39:49
---


這邊我們會很大量依靠 GitLab 幫忙管理人員帳號 紀錄行為
透過 GitLab Runner 來執行我們的腳本

<!--more-->

# 建立 專屬資料夾
```
sudo mkdir -p /usr/local/lab
sudo chown -R centos /usr/local/lab
mkdir -p /usr/local/lab/gitlab
```

# 建立 docker-compose.yml
```
cat << 'EOF' > /usr/local/lab/gitlab/docker-compose.yml
version: "3.7"

services:
  gitlab:
    hostname: gitlab.samchu.com
    image: gitlab/gitlab-ce:latest
    container_name: gitlab
    restart: always
    volumes:
      - /usr/local/lab/gitlab/config:/etc/gitlab
      - /usr/local/lab/gitlab/logs:/var/log/gitlab
      - /usr/local/lab/gitlab/data:/var/opt/gitlab
    network_mode: "host"
EOF
```

‼️專案建立後, Clone 那顆按鈕提供的網址正不正確是靠 hostname, 所以要想好再建立  
目前建立後我就不知道怎麼改啦XD

# 啟動服務
```
cd /usr/local/lab/gitlab
sudo docker-compose up -d
```

# 設定 root 密碼
打開網頁設定 root 密碼

<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/tw/"><img alt="創用 CC 授權條款" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/3.0/tw/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">SAM的程式筆記</span>由<a xmlns:cc="http://creativecommons.org/ns#" href="https://blog.samchu.dev/" property="cc:attributionName" rel="cc:attributionURL">朱尚禮</a>製作，以<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/tw/">創用CC 姓名標示-非商業性-相同方式分享 3.0 台灣 授權條款</a>釋出。